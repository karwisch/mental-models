<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    <title>Mental Models Decision Navigator - Untangled Narrative</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Brand: Violet (JTC) — primary UI accent */
            --primary: #643A5B;
            --primary-mid: #A96A9C;
            --primary-light: #D4B5CD;
            --primary-lightest: #E5D2E1;
            --shadow-primary: rgba(100, 58, 91, 0.15);

            /* Brand: China Rose — secondary accent */
            --rose: #B46277;
            --rose-mid: #CD98A5;
            --rose-light: #E6CBD2;
            --rose-lightest: #F0E0E4;

            /* Brand: Neutrals */
            --charcoal: #3A3F45;
            --slate: #747E8B;
            --cream: #f8f6f3;
            --warm-white: #fefdfb;

            /* Phase colors — each a distinct brand color */
            --diagnostic-color: #015F7B;
            --diagnostic-mid: #03C0F9;
            --diagnostic-light: #B2ECFE;
            --evaluative-color: #575C87;
            --evaluative-mid: #8B8FB5;
            --evaluative-light: #DCDDE9;
            --protective-color: #B46277;
            --protective-mid: #CD98A5;
            --protective-light: #F0E0E4;
            --generative-color: #E8A03C;
            --generative-mid: #F0C07C;
            --generative-light: #FAECD8;
            --implementation-color: #6CAA64;
            --implementation-mid: #9DC698;
            --implementation-light: #E2EEE0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            text-size-adjust: 100%;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, var(--warm-white) 100%);
            color: var(--charcoal);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* App Layout with Persistent Sidebar */
        .app-layout {
            display: flex;
            min-height: 100vh;
        }

        /* Persistent Left Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 100;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.05);
        }

        .sidebar-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid #e0e0e0;
            background: white;
        }

        .sidebar-brand {
            display: flex;
            justify-content: center;
        }

        .sidebar-brand-logo {
            max-width: 140px;
            height: auto;
            display: block;
        }

        .sidebar-app-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--charcoal);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
        }

        .beta-badge {
            display: inline-block;
            font-size: 0.5rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            background: var(--generative-color);
            color: white;
            padding: 0.15rem 0.35rem;
            border-radius: 3px;
            vertical-align: middle;
            line-height: 1;
        }

        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 0;
        }

        .sidebar-section {
            margin-bottom: 1.5rem;
        }

        .sidebar-section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--charcoal);
            opacity: 0.5;
            padding: 0 1.25rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.6rem 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .sidebar-item:hover {
            background: var(--cream);
        }

        .sidebar-item.active {
            background: linear-gradient(90deg, rgba(100, 58, 91, 0.1), transparent);
            border-left-color: var(--primary);
        }

        .sidebar-item-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .sidebar-item-content {
            flex: 1;
        }

        .sidebar-item-label {
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--charcoal);
        }

        .sidebar-item-sublabel {
            font-size: 0.7rem;
            color: var(--charcoal);
            opacity: 0.6;
        }

        /* Phase Items in Sidebar */
        .phase-sidebar-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .phase-sidebar-item:hover {
            background: var(--cream);
        }

        .phase-sidebar-item.active {
            border-left-color: var(--primary);
            background: linear-gradient(90deg, rgba(100, 58, 91, 0.08), transparent);
        }

        .phase-sidebar-item.completed {
            opacity: 0.7;
        }

        .phase-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            color: white;
        }

        .phase-icon.diagnostic { background: var(--diagnostic-color); }
        .phase-icon.evaluative { background: var(--evaluative-color); }
        .phase-icon.protective { background: var(--protective-color); }
        .phase-icon.generative { background: var(--generative-color); }
        .phase-icon.implementation { background: var(--implementation-color); }

        .phase-sidebar-content {
            flex: 1;
        }

        .phase-sidebar-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 0.2rem;
        }

        .phase-progress-bar {
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
        }

        .phase-progress-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .phase-progress-fill.diagnostic { background: var(--diagnostic-color); }
        .phase-progress-fill.evaluative { background: var(--evaluative-color); }
        .phase-progress-fill.protective { background: var(--protective-color); }
        .phase-progress-fill.generative { background: var(--generative-color); }
        .phase-progress-fill.implementation { background: var(--implementation-color); }

        .phase-progress-text {
            font-size: 0.65rem;
            color: var(--charcoal);
            opacity: 0.6;
            margin-top: 0.2rem;
        }

        /* Status Badges */
        .status-badge {
            font-size: 0.6rem;
            font-weight: 700;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .status-badge.not-started {
            background: #e0e0e0;
            color: #666;
        }

        .status-badge.in-progress {
            background: rgba(100, 58, 91, 0.15);
            color: var(--primary);
        }

        .status-badge.completed {
            background: rgba(108, 170, 100, 0.15);
            color: #6CAA64;
        }

        /* Sidebar Footer */
        .sidebar-footer {
            padding: 1rem 1.25rem;
            border-top: 1px solid #e0e0e0;
            background: var(--cream);
        }

        .sidebar-footer-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
            padding: 0.6rem;
            background: transparent;
            color: #c0392b;
            border: 1.5px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .sidebar-footer-btn:hover {
            background: #c0392b;
            color: white;
            border-color: #c0392b;
            box-shadow: 0 2px 8px rgba(192, 57, 43, 0.3);
        }

        /* Main Content Area - adjusted for sidebar and journal panel */
        .main-area {
            flex: 1;
            margin-left: 280px;
            margin-right: 340px;
            padding: 1.5rem;
            min-height: 100vh;
        }

        /* Focus Area - single-purpose center content */
        .focus-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            padding: 2rem;
        }

        .focus-area.top-aligned {
            justify-content: flex-start;
            min-height: auto;
        }

        /* Sidebar Problem Display */
        .sidebar-problem {
            padding: 0.75rem 1.25rem;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .sidebar-problem-label {
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--primary);
            margin-bottom: 0.25rem;
            font-family: 'Montserrat', sans-serif;
        }

        .sidebar-problem-text {
            font-size: 0.8rem;
            color: var(--charcoal);
            line-height: 1.4;
            font-weight: 500;
        }

        .sidebar-problem-edit {
            font-size: 0.65rem;
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
        }

        .sidebar-problem-edit:hover {
            text-decoration: underline;
        }

        /* Focus View: Centered content cards */
        .focus-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            max-width: 560px;
            width: 100%;
            text-align: center;
        }

        .focus-card .focus-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--charcoal);
            margin-bottom: 0.5rem;
        }

        .focus-card .focus-subtitle {
            font-size: 0.85rem;
            color: var(--charcoal);
            opacity: 0.6;
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }

        /* Welcome section on mode selection */
        .welcome-header {
            text-align: center;
            margin-bottom: 0.25rem;
        }

        .welcome-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.6rem;
        }

        .welcome-description {
            font-size: 0.82rem;
            color: var(--charcoal);
            line-height: 1.6;
            opacity: 0.8;
        }

        .welcome-divider {
            height: 1px;
            background: #e0e0e0;
            margin: 1.25rem 0;
        }

        /* Describe input step */
        .focus-input-area {
            width: 100%;
            text-align: left;
        }

        .focus-input-area input[type="text"],
        .focus-input-area textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.95rem;
            color: var(--charcoal);
            outline: none;
            transition: border-color 0.2s;
            box-sizing: border-box;
            resize: vertical;
        }

        .focus-input-area input[type="text"]:focus,
        .focus-input-area textarea:focus {
            border-color: var(--primary);
        }

        .focus-word-count {
            font-size: 0.7rem;
            color: var(--charcoal);
            opacity: 0.5;
            margin-top: 0.4rem;
            text-align: right;
            font-family: 'Montserrat', sans-serif;
        }

        .focus-word-count.over-limit {
            color: #c0392b;
            opacity: 1;
        }

        .focus-submit-btn {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.65rem 2rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .focus-submit-btn:hover {
            background: var(--primary-mid);
            box-shadow: 0 2px 8px rgba(100, 58, 91, 0.3);
        }

        .focus-submit-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Restore session prompt */
        .restore-summary {
            background: var(--cream);
            border-radius: 8px;
            padding: 0.85rem 1rem;
            margin-bottom: 1.25rem;
            text-align: left;
        }

        .restore-detail {
            font-size: 0.8rem;
            color: var(--charcoal);
            padding: 0.2rem 0;
            line-height: 1.5;
        }

        .restore-detail strong {
            color: var(--primary);
        }

        .restore-actions {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
            width: 100%;
        }

        .restore-btn {
            width: 100%;
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .restore-btn.primary {
            background: var(--primary);
            color: white;
        }

        .restore-btn.primary:hover {
            background: var(--primary-mid);
        }

        .restore-btn.secondary {
            background: transparent;
            color: var(--charcoal);
            border: 1px solid #d0d0d0;
        }

        .restore-btn.secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .restore-export-row {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e0e0e0;
            text-align: center;
        }

        .restore-export-text {
            font-size: 0.8rem;
            color: var(--charcoal);
            display: block;
            margin-bottom: 0.75rem;
        }

        .restore-export-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }

        .restore-export-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--primary);
            border-radius: 6px;
            background: white;
            color: var(--primary);
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.78rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .restore-export-btn:hover {
            background: var(--primary);
            color: white;
        }

        .restore-export-btn.muted {
            border-color: #d0d0d0;
            color: var(--slate);
        }

        .restore-export-btn.muted:hover {
            border-color: var(--charcoal);
            background: var(--charcoal);
            color: white;
        }

        /* Model work view (full-width when working on a model) */
        .model-work-view {
            max-width: 700px;
            width: 100%;
        }

        .model-work-view .model-header {
            margin-bottom: 1.5rem;
        }

        .model-work-view .model-header h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--charcoal);
            margin-bottom: 0.25rem;
        }

        .model-work-view .model-header p {
            font-size: 0.8rem;
            color: var(--charcoal);
            opacity: 0.6;
        }

        .model-work-view .response-section textarea {
            width: 100%;
            min-height: 120px;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            resize: vertical;
            outline: none;
            box-sizing: border-box;
        }

        .model-work-view .response-section textarea:focus {
            border-color: var(--primary);
        }

        .model-work-view .action-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        /* Browse models view */
        .browse-models-view {
            max-width: 700px;
            width: 100%;
        }

        .browse-models-view h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .browse-models-view .browse-subtitle {
            font-size: 0.8rem;
            color: var(--charcoal);
            opacity: 0.6;
            margin-bottom: 1rem;
        }

        /* Phase-colored browse headings */
        .browse-models-view.phase-diagnostic h3 { color: var(--diagnostic-color); }
        .browse-models-view.phase-evaluative h3 { color: var(--evaluative-color); }
        .browse-models-view.phase-protective h3 { color: var(--protective-color); }
        .browse-models-view.phase-generative h3 { color: var(--generative-color); }
        .browse-models-view.phase-implementation h3 { color: var(--implementation-color); }

        .browse-back-link {
            display: inline-block;
            margin-bottom: 1rem;
            font-size: 0.8rem;
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
        }

        .browse-back-link:hover {
            text-decoration: underline;
        }

        /* Progress Overview Card */
        .progress-overview {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .progress-phase-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .progress-phase-icon {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
        }

        .progress-phase-info {
            flex: 1;
        }

        .progress-phase-name {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 0.2rem;
        }

        .progress-phase-bar {
            height: 6px;
            background: #e8e8e8;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-phase-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .progress-phase-percent {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--charcoal);
            min-width: 35px;
            text-align: right;
        }

        /* Right Panel - Decision Journal (persistent on desktop) */
        .right-panel {
            width: 340px;
            flex-shrink: 0;
            position: fixed;
            top: 0;
            right: 0;
            height: 100vh;
            background: white;
            border-left: 1px solid #e0e0e0;
            box-shadow: -2px 0 8px rgba(0, 0, 0, 0.05);
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .right-panel-toggle {
            display: none; /* Hidden on desktop — panel is always visible */
        }

        .panel-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--primary);
        }

        .panel-header-actions {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .panel-action-btn {
            background: none;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.65rem;
            font-weight: 600;
            color: var(--charcoal);
            opacity: 0.7;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            transition: all 0.2s ease;
        }

        .panel-action-btn:hover {
            opacity: 1;
            border-color: var(--primary);
            color: var(--primary);
        }

        .panel-close {
            display: none; /* Hidden on desktop — panel is always visible */
        }

        .journal-sort {
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #e8e8e8;
            flex-shrink: 0;
        }

        .journal-entries {
            flex: 1;
            overflow-y: auto;
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .journal-input-bar {
            padding: 0.75rem;
            border-top: 1px solid #e0e0e0;
            background: var(--cream);
            display: flex;
            gap: 0.5rem;
            align-items: flex-end;
            flex-shrink: 0;
        }

        .journal-input-bar textarea {
            flex: 1;
            min-height: 36px;
            max-height: 80px;
            padding: 0.4rem 0.6rem;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-family: 'Open Sans', sans-serif;
            font-size: 0.75rem;
            resize: none;
            line-height: 1.4;
        }

        .journal-input-bar textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .journal-input-bar .btn {
            padding: 0.4rem 0.75rem;
            font-size: 0.7rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        /* Note entries in journal */
        .log-entry.note {
            border-left: 3px solid #FFD54F;
            background: linear-gradient(135deg, rgba(255, 213, 79, 0.06), white);
        }

        .log-entry.note .log-model-name {
            color: #F9A825;
        }

        .container {
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0;
            min-height: auto;
            position: relative;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 0.25rem;
        }

        .header h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--charcoal);
            margin-bottom: 0.2rem;
        }

        .header p {
            font-size: 0.85rem;
            color: var(--charcoal);
            opacity: 0.65;
        }

        /* Main Content Area */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            flex: 1;
            margin-left: 50px; /* Space for left toggle button */
            margin-right: 50px; /* Space for right toggle button */
        }

        /* Decision/Problem Mode Selector */
        .mode-selector {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .mode-card {
            flex: 1;
            padding: 1.25rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            background: white;
            transition: all 0.2s ease;
            text-align: center;
        }

        .mode-card:hover {
            border-color: var(--primary);
            box-shadow: 0 2px 12px rgba(100, 58, 91, 0.15);
        }

        .mode-card .mode-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .mode-card .mode-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--charcoal);
            margin-bottom: 0.25rem;
        }

        .mode-card .mode-desc {
            font-size: 0.75rem;
            color: var(--charcoal);
            opacity: 0.7;
            line-height: 1.4;
        }

        .mode-card.selected {
            border-color: var(--primary);
            background: rgba(100, 58, 91, 0.05);
            box-shadow: 0 2px 12px rgba(100, 58, 91, 0.15);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #e0e0e0;
            background: var(--cream);
            flex-shrink: 0;
        }

        .panel-header h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
        }

        .panel-header-right h3 {
            color: var(--primary);
        }

        .panel-header-left h3 {
            color: var(--rose);
        }

        .panel-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--charcoal);
            opacity: 0.6;
            transition: opacity 0.3s ease;
            padding: 0;
            line-height: 1;
        }

        .panel-close:hover {
            opacity: 1;
        }

        .panel-tabs {
            display: flex;
            gap: 0.5rem;
        }

        .panel-tab {
            background: none;
            border: none;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--charcoal);
            opacity: 0.5;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .panel-tab:hover {
            opacity: 0.8;
        }

        .panel-tab.active {
            opacity: 1;
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .panel-section {
            display: none;
            flex-direction: column;
            flex: 1;
        }

        .panel-section.active {
            display: flex;
        }

        .panel-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            padding: 1rem;
        }

        /* Container adjustments for sidebar layout */

        /* Phase Navigation */
        .phase-navigation {
            background: white;
            border-radius: 10px;
            padding: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 2px solid var(--primary);
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.5s ease, opacity 0.5s ease, padding 0.5s ease, margin 0.5s ease;
            margin-bottom: 0;
            padding-top: 0;
            padding-bottom: 0;
        }

        .phase-navigation.revealed {
            max-height: 200px;
            opacity: 1;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .phase-navigation h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.7rem;
            color: var(--charcoal);
            margin-bottom: 0.5rem;
            text-align: left;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 700;
            opacity: 0.7;
        }

        .phase-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.4rem;
            justify-content: center;
        }

        .phase-btn {
            flex: 1;
            min-width: 110px;
            padding: 0.5rem 0.6rem;
            border: 2px solid;
            border-radius: 8px;
            background: white;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .phase-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
        }

        .phase-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .phase-btn.diagnostic {
            border-color: var(--diagnostic-color);
            color: var(--diagnostic-color);
        }

        .phase-btn.diagnostic.active {
            background: var(--diagnostic-color);
            color: white;
        }

        .phase-btn.evaluative {
            border-color: var(--evaluative-color);
            color: var(--evaluative-color);
        }

        .phase-btn.evaluative.active {
            background: var(--evaluative-color);
            color: white;
        }

        .phase-btn.protective {
            border-color: var(--protective-color);
            color: var(--protective-color);
        }

        .phase-btn.protective.active {
            background: var(--protective-color);
            color: white;
        }

        .phase-btn.generative {
            border-color: var(--generative-color);
            color: var(--generative-color);
        }

        .phase-btn.generative.active {
            background: var(--generative-color);
            color: white;
        }

        .phase-btn.implementation {
            border-color: var(--implementation-color);
            color: var(--implementation-color);
        }

        .phase-btn.implementation.active {
            background: var(--implementation-color);
            color: white;
        }

        /* Models Section */
        .models-section {
            background: white;
            border-radius: 10px;
            padding: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            min-height: 250px;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.5s ease 0.3s, opacity 0.5s ease 0.3s, padding 0.5s ease 0.3s;
            padding-top: 0;
            padding-bottom: 0;
        }

        .models-section.revealed {
            max-height: 1000px;
            opacity: 1;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }

        .phase-description {
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            border-radius: 6px;
            border-left: 3px solid;
        }

        .phase-description.diagnostic {
            background: rgba(100, 58, 91, 0.08);
            border-color: var(--diagnostic-color);
        }

        .phase-description.evaluative {
            background: rgba(76, 175, 80, 0.08);
            border-color: var(--evaluative-color);
        }

        .phase-description.protective {
            background: rgba(180, 98, 119, 0.08);
            border-color: var(--protective-color);
        }

        .phase-description.generative {
            background: rgba(255, 152, 0, 0.08);
            border-color: var(--generative-color);
        }

        .phase-description.implementation {
            background: rgba(156, 39, 176, 0.08);
            border-color: var(--implementation-color);
        }

        .phase-description h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .phase-description p {
            font-size: 0.75rem;
            line-height: 1.3;
            margin-bottom: 0.15rem;
        }

        .phase-description .core-question {
            font-weight: 600;
            font-style: italic;
            margin-top: 0.25rem;
            opacity: 0.9;
            font-size: 0.75rem;
        }

        /* Tree Walker - Yes/No Question Flow */
        .tree-walker {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 1rem;
            display: none;
        }

        .tree-question {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--charcoal);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .tree-step-label {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--primary);
            margin-bottom: 0.25rem;
            font-family: 'Montserrat', sans-serif;
        }

        .tree-phase-desc {
            font-size: 0.78rem;
            color: var(--slate);
            margin-bottom: 0.75rem;
            line-height: 1.4;
            font-style: italic;
        }

        .tree-buttons {
            display: flex;
            gap: 0.75rem;
        }

        .tree-btn {
            flex: 1;
            padding: 0.75rem 1.25rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--charcoal);
        }

        .tree-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: 0 2px 8px rgba(100, 58, 91, 0.15);
        }

        .tree-btn.yes:hover {
            border-color: var(--primary);
            background: rgba(100, 58, 91, 0.05);
        }

        .tree-btn.no:hover {
            border-color: var(--rose);
            color: var(--rose);
            background: rgba(156, 120, 138, 0.05);
        }

        .tree-recommendation {
            text-align: center;
        }

        .tree-recommendation .rec-label {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-family: 'Montserrat', sans-serif;
        }

        .tree-recommendation .rec-model-name {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--charcoal);
            margin-bottom: 0.25rem;
        }

        .tree-recommendation .rec-model-desc {
            font-size: 0.8rem;
            color: var(--charcoal);
            opacity: 0.7;
            margin-bottom: 1rem;
        }

        .tree-recommendation .rec-actions {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .tree-rec-btn {
            padding: 0.6rem 1.25rem;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }

        .tree-rec-btn.primary {
            background: var(--primary);
            color: white;
        }

        .tree-rec-btn.primary:hover {
            background: var(--primary-mid);
            box-shadow: 0 2px 8px rgba(100, 58, 91, 0.3);
        }

        .tree-rec-btn.secondary {
            background: transparent;
            color: var(--charcoal);
            border: 1.5px solid #e0e0e0;
        }

        .tree-rec-btn.secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .tree-restart-link {
            display: inline-block;
            margin-top: 0.75rem;
            font-size: 0.75rem;
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
        }

        .tree-restart-link:hover {
            text-decoration: underline;
        }

        .tree-history {
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid #f0f0f0;
        }

        .tree-history-item {
            font-size: 0.75rem;
            color: var(--charcoal);
            opacity: 0.5;
            margin-bottom: 0.25rem;
            line-height: 1.4;
        }

        .tree-history-item .answer {
            font-weight: 600;
            color: var(--primary);
            opacity: 1;
        }

        .models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            gap: 0.6rem;
        }

        .models-grid.hidden {
            display: none;
        }

        .model-card {
            padding: 0.75rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
            border-left: 3px solid #e0e0e0;
        }

        .model-card:hover {
            transform: translateY(-1px);
        }

        /* Phase-colored model cards */
        .model-card.diagnostic {
            border-left-color: var(--diagnostic-color);
        }
        .model-card.diagnostic:hover {
            border-color: var(--diagnostic-color);
            box-shadow: 0 2px 8px rgba(1, 95, 123, 0.2);
            background: var(--diagnostic-light);
        }

        .model-card.evaluative {
            border-left-color: var(--evaluative-color);
        }
        .model-card.evaluative:hover {
            border-color: var(--evaluative-color);
            box-shadow: 0 2px 8px rgba(87, 92, 135, 0.2);
            background: var(--evaluative-light);
        }

        .model-card.protective {
            border-left-color: var(--protective-color);
        }
        .model-card.protective:hover {
            border-color: var(--protective-color);
            box-shadow: 0 2px 8px rgba(180, 98, 119, 0.2);
            background: var(--protective-light);
        }

        .model-card.generative {
            border-left-color: var(--generative-color);
        }
        .model-card.generative:hover {
            border-color: var(--generative-color);
            box-shadow: 0 2px 8px rgba(232, 160, 60, 0.2);
            background: var(--generative-light);
        }

        .model-card.implementation {
            border-left-color: var(--implementation-color);
        }
        .model-card.implementation:hover {
            border-color: var(--implementation-color);
            box-shadow: 0 2px 8px rgba(108, 170, 100, 0.2);
            background: var(--implementation-light);
        }

        .model-card.selected {
            border-width: 2px;
        }

        .model-card.diagnostic.selected {
            border-color: var(--diagnostic-color);
            background: var(--diagnostic-light);
        }

        .model-card.evaluative.selected {
            border-color: var(--evaluative-color);
            background: var(--evaluative-light);
        }

        .model-card.protective.selected {
            border-color: var(--protective-color);
            background: var(--protective-light);
        }

        .model-card.generative.selected {
            border-color: var(--generative-color);
            background: var(--generative-light);
        }

        .model-card.implementation.selected {
            border-color: var(--implementation-color);
            background: var(--implementation-light);
        }

        .model-name {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 0.3rem;
            color: var(--charcoal);
            line-height: 1.2;
        }

        .model-description {
            font-size: 0.7rem;
            line-height: 1.25;
            color: var(--charcoal);
            opacity: 0.75;
        }

        /* Work Area */
        .work-area {
            background: white;
            border-radius: 10px;
            padding: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: margin-top 0.5s ease;
            margin-top: 0;
        }

        .work-area.slide-down {
            margin-top: 0;
        }

        .work-area h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem;
            color: var(--charcoal);
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 700;
            opacity: 0.7;
        }

        /* Split-pane layout for work area */
        .work-area-content {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .work-area-content.split-pane {
            flex-wrap: nowrap;
        }

        .work-area-left {
            flex: 1;
            min-width: 300px;
        }

        .work-area-right {
            flex: 1;
            min-width: 280px;
            display: flex;
            flex-direction: column;
        }

        .work-area-content:not(.split-pane) .work-area-left {
            flex: 1 1 100%;
        }

        .work-area-content:not(.split-pane) .work-area-right {
            flex: 1 1 100%;
        }

        .response-section {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .response-section textarea {
            flex: 1;
            min-height: 150px;
        }

        .response-workspace-label {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--primary);
            margin-bottom: 0.2rem;
        }

        .response-workspace-hint {
            font-size: 0.75rem;
            color: var(--slate);
            margin-bottom: 0.75rem;
        }

        .inline-prompts {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            margin-bottom: 0.75rem;
        }

        .inline-prompt-card {
            padding: 0.6rem 0.75rem;
            border: 1px solid #e0e0e0;
            border-left: 3px solid var(--primary-light);
            border-radius: 0 6px 6px 0;
            font-size: 0.8rem;
            line-height: 1.4;
            color: var(--charcoal);
            cursor: pointer;
            transition: all 0.15s ease;
            background: white;
        }

        .inline-prompt-card:hover {
            border-left-color: var(--primary);
            background: var(--primary-lightest);
        }

        .inline-prompt-card.selected {
            border-left-color: var(--primary);
            border-left-width: 3px;
            background: var(--primary-lightest);
            font-weight: 600;
        }

        .response-active-question {
            background: var(--cream);
            border-left: 3px solid var(--primary);
            border-radius: 0 8px 8px 0;
            padding: 0.6rem 0.85rem;
            margin-bottom: 0.75rem;
        }

        .response-prompt-label {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.6rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .response-prompt-text {
            font-size: 0.85rem;
            color: var(--charcoal);
            line-height: 1.5;
            font-style: italic;
        }

        .selected-model-display {
            padding: 0.5rem;
            background: var(--cream);
            border-radius: 6px;
            margin-bottom: 0.5rem;
            min-height: 40px;
            font-size: 0.75rem;
            line-height: 1.3;
        }

        .selected-model-display.initial {
            background: linear-gradient(135deg, rgba(100, 58, 91, 0.1), var(--cream));
            border: 3px solid var(--primary);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 16px rgba(100, 58, 91, 0.2);
        }

        .selected-model-display.initial .instruction-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.75rem;
            font-family: 'Montserrat', sans-serif;
            text-align: center;
        }

        .selected-model-display.initial .instruction-subtext {
            font-size: 0.9rem;
            color: var(--charcoal);
            opacity: 0.85;
            line-height: 1.6;
            text-align: center;
        }

        .selected-model-display.empty {
            opacity: 0.5;
            font-style: italic;
        }

        .model-prompt {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
        }

        /* Expanded Model Content Styles */
        .selected-model-display.expanded {
            padding: 1rem;
            max-height: 50vh;
            overflow-y: auto;
        }

        .model-header {
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--primary);
        }

        .model-header h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .model-header .model-tagline {
            font-size: 0.85rem;
            color: var(--charcoal);
            opacity: 0.7;
            font-style: italic;
        }

        .model-section {
            margin-bottom: 1rem;
        }

        .model-section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--rose);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .model-section-title::before {
            content: '';
            width: 3px;
            height: 14px;
            background: var(--rose);
            border-radius: 2px;
        }

        .model-explanation {
            font-size: 0.85rem;
            line-height: 1.6;
            color: var(--charcoal);
        }

        .model-example {
            background: linear-gradient(135deg, rgba(100, 58, 91, 0.08), rgba(100, 58, 91, 0.03));
            border-left: 3px solid var(--primary);
            padding: 0.75rem;
            border-radius: 0 6px 6px 0;
            font-size: 0.8rem;
            line-height: 1.5;
            color: var(--charcoal);
        }

        .model-prompts-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .model-prompts-list li {
            position: relative;
            padding: 0.5rem 0.75rem 0.5rem 1.5rem;
            margin-bottom: 0.5rem;
            background: var(--cream);
            border-radius: 6px;
            font-size: 0.8rem;
            line-height: 1.4;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .model-prompts-list li::before {
            content: '→';
            position: absolute;
            left: 0.5rem;
            color: var(--primary);
            font-weight: bold;
        }

        .model-prompts-list li:hover {
            background: linear-gradient(135deg, rgba(100, 58, 91, 0.1), var(--cream));
            border-color: var(--primary);
        }

        .model-prompts-list li.selected-prompt {
            background: linear-gradient(135deg, rgba(100, 58, 91, 0.15), rgba(100, 58, 91, 0.08));
            border-color: var(--primary);
            box-shadow: 0 2px 8px rgba(100, 58, 91, 0.15);
        }

        .model-warnings {
            background: linear-gradient(135deg, rgba(180, 98, 119, 0.08), rgba(180, 98, 119, 0.03));
            border-left: 3px solid var(--rose);
            padding: 0.75rem;
            border-radius: 0 6px 6px 0;
        }

        .model-warnings ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .model-warnings li {
            font-size: 0.75rem;
            color: var(--charcoal);
            padding: 0.25rem 0;
            padding-left: 1.25rem;
            position: relative;
        }

        .model-warnings li::before {
            content: '⚠';
            position: absolute;
            left: 0;
            color: var(--rose);
        }

        .model-related {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .model-related-tag {
            background: var(--cream);
            border: 1px solid #ddd;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            color: var(--charcoal);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .model-related-tag:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .prompt-instruction {
            font-size: 0.75rem;
            color: var(--primary);
            opacity: 0.8;
            margin-bottom: 0.5rem;
            font-style: italic;
        }

        /* Collapsible Accordion Sections */
        .model-section.collapsible {
            margin-bottom: 0.5rem;
        }

        .model-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            padding: 0.5rem;
            background: var(--cream);
            border-radius: 6px;
            margin-bottom: 0;
            transition: all 0.2s ease;
        }

        .model-section-header:hover {
            background: linear-gradient(135deg, rgba(100, 58, 91, 0.1), var(--cream));
        }

        .model-section-header .model-section-title {
            margin-bottom: 0;
        }

        .model-section-toggle {
            font-size: 0.8rem;
            color: var(--primary);
            transition: transform 0.3s ease;
        }

        .model-section-header.collapsed .model-section-toggle {
            transform: rotate(-90deg);
        }

        .model-section-body {
            padding: 0.75rem;
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease, opacity 0.3s ease;
            opacity: 1;
        }

        .model-section-header.collapsed + .model-section-body {
            max-height: 0;
            padding: 0 0.75rem;
            opacity: 0;
        }

        .section-next-link {
            display: inline-block;
            margin-top: 0.75rem;
            font-family: 'Montserrat', sans-serif;
            font-size: 0.78rem;
            font-weight: 600;
            color: var(--primary);
            cursor: pointer;
            padding: 0.3rem 0;
        }

        .section-next-link:hover {
            text-decoration: underline;
        }

        /* Confirmation Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.visible {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            color: var(--charcoal);
            margin-bottom: 0.75rem;
        }

        .modal p {
            font-size: 0.85rem;
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 1.25rem;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 0.6rem 1.25rem;
            border: none;
            border-radius: 6px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-btn-cancel {
            background: var(--cream);
            color: var(--charcoal);
        }

        .modal-btn-cancel:hover {
            background: #e0e0e0;
        }

        .modal-btn-confirm {
            background: var(--rose);
            color: white;
        }

        .modal-btn-confirm:hover {
            background: var(--rose-mid);
        }

        /* Decision Summary Section */
        .decision-summary {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.08), white);
            border: 2px solid var(--implementation-color);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 0.75rem;
            display: none;
        }

        .decision-summary.visible {
            display: block;
            animation: slideIn 0.4s ease-out;
        }

        .decision-summary h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            color: var(--implementation-color);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .decision-summary h3::before {
            content: '✓';
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--implementation-color);
            color: white;
            border-radius: 50%;
            font-size: 0.75rem;
        }

        .decision-summary-intro {
            font-size: 0.8rem;
            color: var(--charcoal);
            opacity: 0.8;
            margin-bottom: 0.75rem;
        }

        .decision-summary textarea {
            min-height: 120px;
            border-color: var(--implementation-color);
        }

        .decision-summary textarea:focus {
            border-color: var(--implementation-color);
            box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.1);
        }

        .decision-summary-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .btn-summary {
            background: var(--implementation-color);
            color: white;
        }

        .btn-summary:hover {
            background: #7B1FA2;
            box-shadow: 0 2px 8px rgba(156, 39, 176, 0.3);
        }

        /* Log Sort Toggle */
        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e0e0e0;
        }

        .log-header-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--charcoal);
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .log-sort-toggle {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.7rem;
            color: var(--charcoal);
            opacity: 0.7;
        }

        .log-sort-toggle button {
            background: none;
            border: 1px solid #ddd;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.65rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .log-sort-toggle button:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .log-sort-toggle button.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        textarea {
            width: 100%;
            min-height: 80px;
            padding: 0.6rem;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-family: 'Open Sans', sans-serif;
            font-size: 0.8rem;
            resize: vertical;
            transition: border-color 0.3s ease, min-height 0.3s ease;
            line-height: 1.4;
        }

        textarea.initial-entry {
            min-height: 120px;
            font-size: 0.9rem;
            border-color: var(--primary);
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-mid);
            box-shadow: 0 1px 4px rgba(100, 58, 91, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--charcoal);
            border: 1px solid #e0e0e0;
        }

        .btn-secondary:hover {
            background: var(--cream);
            border-color: var(--rose);
            color: var(--rose);
            box-shadow: 0 1px 4px rgba(180, 98, 119, 0.2);
        }

        .btn-warning {
            background: transparent;
            color: #E8A03C;
            border: 1px solid #E8A03C;
            padding: 0.5rem 0.75rem;
        }

        .btn-warning:hover {
            background: #E8A03C;
            color: white;
            box-shadow: 0 1px 4px rgba(255, 152, 0, 0.3);
        }

        /* Sidebar visibility controlled by layout */

        .decision-log {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .decision-log h3 {
            display: none; /* Header now in drawer-header */
        }

        .log-entries {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .log-entry {
            padding: 0.75rem;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
            cursor: move;
            transition: all 0.2s ease;
            background: white;
        }

        .log-entry:hover {
            border-color: var(--primary);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }

        .log-entry.diagnostic {
            border-left: 3px solid var(--diagnostic-color);
        }

        .log-entry.evaluative {
            border-left: 3px solid var(--evaluative-color);
        }

        .log-entry.protective {
            border-left: 3px solid var(--protective-color);
        }

        .log-entry.generative {
            border-left: 3px solid var(--generative-color);
        }

        .log-entry.implementation {
            border-left: 3px solid var(--implementation-color);
        }

        .log-entry.initial {
            border-left: 3px solid var(--charcoal);
            background: rgba(58, 63, 69, 0.02);
        }

        .log-entry.summary {
            border-left: 3px solid gold;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.08), rgba(255, 215, 0, 0.02));
        }

        .log-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.3rem;
        }

        .log-model-name {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.75rem;
        }

        .log-actions {
            display: flex;
            gap: 0.3rem;
        }

        .log-action-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.85rem;
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }

        .log-action-btn:hover {
            opacity: 1;
        }

        .log-prompt {
            font-size: 0.7rem;
            font-style: italic;
            color: var(--primary);
            margin-bottom: 0.4rem;
            padding: 0.3rem 0.5rem;
            background: rgba(100, 58, 91, 0.08);
            border-radius: 4px;
            line-height: 1.3;
        }

        .log-content {
            font-size: 0.7rem;
            line-height: 1.3;
            color: var(--charcoal);
            word-wrap: break-word;
        }

        .log-timestamp {
            font-size: 0.65rem;
            opacity: 0.6;
            margin-top: 0.3rem;
        }

        /* (Notepad styles removed — merged into Decision Journal) */

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 1rem;
            opacity: 0.5;
            font-style: italic;
            font-size: 0.75rem;
        }

        /* Flying Entry Animation */
        @keyframes flyToLog {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(200px, -100px) scale(0.5) rotate(10deg);
                opacity: 0.7;
            }
            100% {
                transform: translate(400px, -200px) scale(0.2) rotate(20deg);
                opacity: 0;
            }
        }

        .flying-entry {
            position: fixed;
            background: white;
            border: 2px solid var(--charcoal);
            border-radius: 8px;
            padding: 0.6rem;
            max-width: 300px;
            z-index: 1000;
            pointer-events: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            animation: flyToLog 0.8s ease-out forwards;
        }

        .flying-entry .flying-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 0.75rem;
            margin-bottom: 0.3rem;
            color: var(--charcoal);
        }

        .flying-entry .flying-text {
            font-size: 0.7rem;
            line-height: 1.3;
            color: var(--charcoal);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Scrollbar Styling */
        .journal-entries::-webkit-scrollbar {
            width: 8px;
        }

        .journal-entries::-webkit-scrollbar-track {
            background: var(--cream);
            border-radius: 4px;
        }

        .journal-entries::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        .journal-entries::-webkit-scrollbar-thumb:hover {
            background: var(--primary-mid);
        }

        /* Responsive Design */

        /* Tablet: collapse right panel to drawer */
        @media (max-width: 1024px) {
            .main-area {
                margin-right: 0;
            }

            .right-panel {
                right: 0;
                transform: translateX(100%);
                transition: transform 0.3s ease;
                box-shadow: -4px 0 12px rgba(0, 0, 0, 0.1);
            }

            .right-panel.open {
                transform: translateX(0);
            }

            .right-panel-toggle {
                display: block;
                position: fixed;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                background: var(--primary);
                color: white;
                border: none;
                padding: 1rem 0.5rem;
                border-radius: 8px 0 0 8px;
                cursor: pointer;
                writing-mode: vertical-rl;
                text-orientation: mixed;
                font-family: 'Montserrat', sans-serif;
                font-weight: 600;
                font-size: 0.75rem;
                z-index: 99;
                transition: all 0.3s ease;
            }

            .right-panel-toggle:hover {
                background: var(--primary-mid);
            }

            .right-panel-toggle.active {
                right: 340px;
            }

            .panel-close {
                display: block;
            }

            .work-area-content.split-pane {
                flex-wrap: wrap;
            }

            .work-area-content.split-pane .work-area-left,
            .work-area-content.split-pane .work-area-right {
                flex: 1 1 100%;
            }
        }

        .sidebar-toggle {
            display: none;
        }

        .sidebar-backdrop {
            display: none;
        }

        .mobile-header {
            display: none;
        }

        /* Mobile/Tablet: collapse sidebar to hamburger */
        @media (max-width: 1024px) {
            .app-layout {
                overflow-x: hidden;
                max-width: 100vw;
            }

            .sidebar {
                left: 0;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .mobile-header {
                display: flex;
                flex-direction: column;
                align-items: center;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                background: white;
                border-bottom: 1px solid #e0e0e0;
                z-index: 98;
                padding: 0.75rem 1rem 0.5rem;
                box-shadow: 0 1px 4px rgba(0,0,0,0.06);
            }

            .mobile-header-logo {
                display: block;
            }

            .mobile-header-logo img {
                height: 48px;
                width: auto;
                display: block;
            }

            .mobile-header-title {
                font-family: 'Montserrat', sans-serif;
                font-size: 0.7rem;
                font-weight: 600;
                color: var(--slate);
                letter-spacing: 0.08em;
                margin-top: 0.25rem;
            }

            .mobile-header-title .beta-badge {
                display: inline-block;
                font-size: 0.45rem;
                vertical-align: middle;
                background: var(--slate);
                color: white;
                padding: 0.08rem 0.25rem;
                border-radius: 3px;
                font-weight: 700;
                margin-left: 0.2rem;
            }

            .sidebar-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
                position: absolute;
                top: 0.6rem;
                left: 0.6rem;
                width: 36px;
                height: 36px;
                background: none;
                border: 1px solid #e0e0e0;
                border-radius: 6px;
                cursor: pointer;
                z-index: 99;
                font-size: 1.2rem;
                color: var(--slate);
                transition: all 0.2s ease;
            }

            .sidebar-toggle:hover {
                border-color: var(--primary);
                color: var(--primary);
            }

            .sidebar-toggle.hidden {
                opacity: 0;
                pointer-events: none;
            }

            .sidebar-backdrop {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.3);
                z-index: 99;
            }

            .sidebar-backdrop.visible {
                display: block;
            }

            .main-area {
                margin-left: 0;
                padding-top: 84px;
            }

            .focus-area {
                padding: 1rem;
            }

            .models-grid {
                grid-template-columns: 1fr;
            }

            .inline-prompt-card {
                border-radius: 0;
                border-left: 3px solid var(--primary-light);
                border-right: none;
                margin-left: -1rem;
                margin-right: -1rem;
                padding: 0.6rem 1rem;
            }

            .inline-prompts {
                margin-left: 0;
                margin-right: 0;
            }

            .work-area-left,
            .work-area-right {
                min-width: 0;
            }

            .right-panel {
                width: calc(100% - 60px);
                right: 0;
                transform: translateX(100%);
            }

            .right-panel.open {
                transform: translateX(0);
            }

            .drawer-backdrop {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 60px;
                height: 100%;
                z-index: 99;
                background: rgba(0, 0, 0, 0.3);
            }

            .drawer-backdrop.visible {
                display: block;
            }

            .right-panel-toggle.active {
                display: none;
            }

            .modal {
                width: 95%;
                margin: 1rem;
            }

            .action-buttons {
                flex-wrap: wrap;
            }

            .action-buttons .btn {
                flex: 1 1 auto;
            }
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <!-- Mobile header (visible only on mobile) -->
        <div class="mobile-header" id="mobileHeader">
            <button class="sidebar-toggle" id="sidebarToggle">☰</button>
            <a class="mobile-header-logo" href="https://www.untanglednarrative.com" target="_blank" rel="noopener noreferrer">
                <img src="https://www.untanglednarrative.com/wp-content/uploads/2025/12/cropped-untangled-narrative-2026-logo-horizontal.png" alt="Untangled Narrative" />
            </a>
            <div class="mobile-header-title">MENTAL MODELS NAVIGATOR <span class="beta-badge">BETA</span></div>
        </div>
        <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

        <!-- Persistent Left Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <a href="https://www.untanglednarrative.com" target="_blank" rel="noopener noreferrer">
                        <img class="sidebar-brand-logo" src="https://www.untanglednarrative.com/wp-content/uploads/2025/12/cropped-untangled-narrative-2026-logo-horizontal.png" alt="Untangled Narrative" />
                    </a>
                </div>
                <div class="sidebar-app-title">Mental Models Navigator <span class="beta-badge">BETA</span></div>
            </div>

            <!-- Problem/Decision Description (shown after user describes it) -->
            <div class="sidebar-problem" id="sidebarProblem" style="display: none;">
                <div class="sidebar-problem-label" id="sidebarProblemLabel">Your Decision</div>
                <div class="sidebar-problem-text" id="sidebarProblemText"></div>
                <span class="sidebar-problem-edit" id="editProblem">Edit</span>
            </div>

            <nav class="sidebar-nav">
                <!-- Actions Section -->
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Actions</div>
                    <div class="sidebar-item" id="quickSuggest">
                        <div class="sidebar-item-icon">💡</div>
                        <div class="sidebar-item-content">
                            <div class="sidebar-item-label">Suggest a Model</div>
                        </div>
                    </div>
                    <div class="sidebar-item" id="quickBrowse">
                        <div class="sidebar-item-icon">📋</div>
                        <div class="sidebar-item-content">
                            <div class="sidebar-item-label">Browse All Models</div>
                        </div>
                    </div>
                    <div class="sidebar-item" id="quickExport">
                        <div class="sidebar-item-icon">📤</div>
                        <div class="sidebar-item-content">
                            <div class="sidebar-item-label">Export Session</div>
                        </div>
                    </div>
                </div>

                <!-- Decision Phases Section -->
                <div class="sidebar-section" id="phasesSection">
                    <div class="sidebar-section-title">Decision Phases</div>

                    <div class="phase-sidebar-item" data-phase="diagnostic">
                        <div class="phase-icon diagnostic">1</div>
                        <div class="phase-sidebar-content">
                            <div class="phase-sidebar-label">
                                Diagnose
                                <span class="status-badge not-started" id="statusDiagnostic">Not Started</span>
                            </div>
                            <div class="phase-progress-bar">
                                <div class="phase-progress-fill diagnostic" id="progressDiagnostic" style="width: 0%"></div>
                            </div>
                            <div class="phase-progress-text" id="progressTextDiagnostic">0 entries</div>
                        </div>
                    </div>

                    <div class="phase-sidebar-item" data-phase="evaluative">
                        <div class="phase-icon evaluative">2</div>
                        <div class="phase-sidebar-content">
                            <div class="phase-sidebar-label">
                                Evaluate
                                <span class="status-badge not-started" id="statusEvaluative">Not Started</span>
                            </div>
                            <div class="phase-progress-bar">
                                <div class="phase-progress-fill evaluative" id="progressEvaluative" style="width: 0%"></div>
                            </div>
                            <div class="phase-progress-text" id="progressTextEvaluative">0 entries</div>
                        </div>
                    </div>

                    <div class="phase-sidebar-item" data-phase="protective">
                        <div class="phase-icon protective">3</div>
                        <div class="phase-sidebar-content">
                            <div class="phase-sidebar-label">
                                Protect
                                <span class="status-badge not-started" id="statusProtective">Not Started</span>
                            </div>
                            <div class="phase-progress-bar">
                                <div class="phase-progress-fill protective" id="progressProtective" style="width: 0%"></div>
                            </div>
                            <div class="phase-progress-text" id="progressTextProtective">0 entries</div>
                        </div>
                    </div>

                    <div class="phase-sidebar-item" data-phase="generative">
                        <div class="phase-icon generative">4</div>
                        <div class="phase-sidebar-content">
                            <div class="phase-sidebar-label">
                                Generate
                                <span class="status-badge not-started" id="statusGenerative">Not Started</span>
                            </div>
                            <div class="phase-progress-bar">
                                <div class="phase-progress-fill generative" id="progressGenerative" style="width: 0%"></div>
                            </div>
                            <div class="phase-progress-text" id="progressTextGenerative">0 entries</div>
                        </div>
                    </div>

                    <div class="phase-sidebar-item" data-phase="implementation">
                        <div class="phase-icon implementation">5</div>
                        <div class="phase-sidebar-content">
                            <div class="phase-sidebar-label">
                                Implement
                                <span class="status-badge not-started" id="statusImplementation">Not Started</span>
                            </div>
                            <div class="phase-progress-bar">
                                <div class="phase-progress-fill implementation" id="progressImplementation" style="width: 0%"></div>
                            </div>
                            <div class="phase-progress-text" id="progressTextImplementation">0 entries</div>
                        </div>
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer">
                <button class="sidebar-footer-btn" id="startOverSidebar">
                    🔄 Start New Decision
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-area">
            <div class="focus-area" id="focusArea">
                <!-- Content swapped dynamically based on current step -->
            </div>
        </main>

        <!-- Drawer backdrop (visible on mobile when journal is open) -->
        <div class="drawer-backdrop" id="drawerBackdrop"></div>

        <!-- Right Panel Toggle (visible only on tablet/mobile) -->
        <button class="right-panel-toggle" id="rightPanelToggle">📋 Journal</button>

        <!-- Right Panel - Decision Journal -->
        <div class="right-panel" id="rightPanel">
            <div class="panel-header panel-header-right">
                <div class="panel-title">Decision Journal</div>
                <div class="panel-header-actions">
                    <button class="panel-action-btn" id="copyJournal" title="Copy all">Copy</button>
                    <button class="panel-action-btn" id="exportJournal" title="Export session">Export</button>
                    <button class="panel-close" id="rightPanelClose">&times;</button>
                </div>
            </div>
            <div class="journal-sort">
                <div class="log-sort-toggle">
                    <span>Sort:</span>
                    <button id="sortNewest" class="active">Newest</button>
                    <button id="sortOldest">Oldest</button>
                </div>
            </div>
            <div class="journal-entries" id="journalEntries">
                <div class="empty-state">Your decision journal will appear here as you work through the process.</div>
            </div>
            <div class="journal-input-bar">
                <textarea id="journalNoteInput" placeholder="Add a note..." rows="2"></textarea>
                <button class="btn btn-primary" id="addJournalNote">+ Note</button>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal-overlay" id="confirmModal">
            <div class="modal">
                <h3>Start Over?</h3>
                <p>This will clear all your work including your problem description and all journal entries. This action cannot be undone.</p>
                <div class="modal-buttons">
                    <button class="modal-btn modal-btn-cancel" id="modalCancel">Cancel</button>
                    <button class="modal-btn modal-btn-confirm" id="modalConfirm">Yes, Start Over</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mental Models Data Structure
        const mentalModelsData = {
            diagnostic: {
                title: "Diagnostic Models",
                purpose: "Understand what's actually happening before making decisions",
                coreQuestion: "What's the true nature of this situation?",
                whenToUse: "At the beginning of any decision process, when confused or stuck, when conventional explanations don't fit the evidence.",
                models: [
                    {
                        name: "Circle of Competence",
                        description: "Know what you know vs. what you assume",
                        explanation: "The Circle of Competence, popularized by Warren Buffett and Charlie Munger, helps you identify the boundaries of your true knowledge. Inside your circle are areas where you have genuine expertise through study, experience, or training. Outside are areas where you may have opinions but lack deep understanding. The key insight is that the size of your circle matters less than knowing its boundaries.",
                        example: "A successful software engineer is asked to evaluate a commercial real estate investment. Despite being intelligent and analytical, real estate requires understanding of local markets, zoning laws, property management, and financing structures they've never studied. Their technical success doesn't transfer. Recognizing this, they either decline, find an expert partner, or invest significant time learning before deciding.",
                        prompts: [
                            "What specific expertise or experience do you have that's directly relevant to this situation?",
                            "Where are you relying on assumptions, analogies, or 'common sense' rather than verified knowledge?",
                            "If you had to teach someone the fundamentals of this domain, could you? What gaps would appear?",
                            "Who has genuine expertise here that you could consult or defer to?"
                        ],
                        warnings: [
                            "Confidence is not competence - feeling certain doesn't mean you're right",
                            "Success in one domain doesn't automatically transfer to another",
                            "The Dunning-Kruger effect: those with limited knowledge often overestimate their competence"
                        ],
                        relatedModels: ["First Principles", "Confirmation Bias Recognition"]
                    },
                    {
                        name: "Occam's Razor",
                        description: "The simplest explanation is usually correct",
                        explanation: "Occam's Razor (also called the principle of parsimony) states that when you have competing explanations for something, the one with the fewest assumptions is usually correct. This doesn't mean the simplest explanation is always right, but that you shouldn't add complexity without evidence. Each additional assumption multiplies the chances of error.",
                        example: "Your laptop won't turn on. You could theorize: (A) the battery is dead, or (B) a power surge damaged the motherboard, which triggered a firmware corruption, which disabled the power button circuit. Occam's Razor says try charging the battery first. Don't assume a complex chain of failures when a simple explanation fits.",
                        prompts: [
                            "What is the simplest explanation that accounts for all the evidence you're seeing?",
                            "How many assumptions does your current theory require? Can you list them?",
                            "Are you adding complexity because of evidence, or because of anxiety, ego, or narrative appeal?",
                            "What would you need to see to rule out the simpler explanation?"
                        ],
                        warnings: [
                            "Simple doesn't mean easy or obvious - it means fewer moving parts",
                            "Don't oversimplify: the explanation must still fit all the evidence",
                            "Sometimes reality is genuinely complex; Occam's Razor is a starting point, not a conclusion"
                        ],
                        relatedModels: ["First Principles", "Root Cause Analysis"]
                    },
                    {
                        name: "First Principles",
                        description: "Break down to fundamental truths",
                        explanation: "First Principles thinking means breaking down a problem into its most basic, foundational truths - things you know to be true independent of convention, assumption, or analogy - and then building up from there. Instead of reasoning by analogy ('this is how it's always been done'), you ask 'what do we know for certain?' This approach, used by scientists and innovators from Aristotle to Elon Musk, often reveals that conventional limits are actually just conventions.",
                        example: "When SpaceX started, rockets cost $65 million. Instead of accepting this, Musk asked: what are rockets made of? Aluminum, titanium, copper, carbon fiber. What do those materials cost on the commodity market? About 2% of the rocket price. The rest was inefficiency, tradition, and markup. By building from first principles rather than industry convention, SpaceX cut costs by 90%.",
                        prompts: [
                            "What are the fundamental truths or facts in this situation that you know to be true?",
                            "What assumptions are you inheriting from convention, tradition, or 'how things are done'?",
                            "If you had to explain this problem to someone with no context, what are the irreducible components?",
                            "What would you do differently if you were starting from scratch with no constraints?"
                        ],
                        warnings: [
                            "First principles thinking is mentally taxing - don't use it for every minor decision",
                            "Be careful not to dismiss useful conventions just because they're conventional",
                            "You still need domain knowledge to identify what the true fundamentals are"
                        ],
                        relatedModels: ["Circle of Competence", "Root Cause Analysis", "Systems Thinking"]
                    },
                    {
                        name: "Confirmation Bias Recognition",
                        description: "Challenge your assumptions",
                        explanation: "Confirmation bias is our tendency to search for, interpret, favor, and recall information in a way that confirms our existing beliefs. We literally see what we expect to see. This isn't a character flaw - it's how human cognition works. The only defense is actively seeking disconfirmation: looking for evidence that proves you wrong, not right. Scientists call this 'falsification' and it's the foundation of the scientific method.",
                        example: "A manager believes a team member is unmotivated. They start noticing every time the person arrives late or seems disengaged, while overlooking the quality work produced and the personal challenges the person may be facing. Each observation 'confirms' their belief. To counter this, they should actively look for evidence of motivation: projects completed, problems solved, ideas contributed.",
                        prompts: [
                            "What do you believe about this situation? State it clearly as a hypothesis.",
                            "What evidence would prove your belief WRONG? Have you looked for it?",
                            "Who disagrees with your view? What's the strongest version of their argument?",
                            "If you woke up tomorrow and discovered you were completely wrong about this, what would be the first clue?"
                        ],
                        warnings: [
                            "Seeking disconfirming evidence feels uncomfortable - that discomfort is a feature, not a bug",
                            "You can't eliminate confirmation bias, only manage it through deliberate practice",
                            "Being aware of the bias doesn't automatically protect you from it"
                        ],
                        relatedModels: ["Circle of Competence", "First Principles", "Inversion"]
                    },
                    {
                        name: "Root Cause Analysis",
                        description: "Find underlying causes, not symptoms",
                        explanation: "Root Cause Analysis is a systematic process of identifying the fundamental reason why a problem occurred, rather than just addressing surface symptoms. The most common technique is '5 Whys' - asking 'why' repeatedly until you reach a cause that, if addressed, would prevent recurrence. Treating symptoms provides temporary relief; treating root causes provides lasting solutions.",
                        example: "A website keeps crashing. Symptom: server runs out of memory. Why? Too many database connections. Why? Connections aren't being closed properly. Why? Developers aren't following the connection pooling standard. Why? The standard isn't documented or enforced. Why? No code review process exists. Root cause: missing development process, not a technical bug. Fix the process, fix the problem permanently.",
                        prompts: [
                            "What is the immediate problem? Now ask: WHY is this happening?",
                            "Take your answer and ask WHY again. Repeat at least 5 times.",
                            "At what level of 'why' do you find something you can actually change or control?",
                            "If you fixed this root cause, would the original problem be impossible or unlikely to recur?"
                        ],
                        warnings: [
                            "Don't stop at the first 'why' - surface causes are rarely root causes",
                            "There may be multiple root causes; don't assume there's only one",
                            "Sometimes you need to treat symptoms urgently while working on root causes in parallel"
                        ],
                        relatedModels: ["First Principles", "Systems Thinking", "Occam's Razor"]
                    },
                    {
                        name: "Systems Thinking",
                        description: "See how parts interact",
                        explanation: "Systems Thinking is a holistic approach that focuses on how components interrelate and work together over time within larger systems. Instead of analyzing parts in isolation, you examine feedback loops, delays, unintended consequences, and emergent behaviors. Many problems persist because solutions address components without understanding the system dynamics that created and maintain the problem.",
                        example: "A city tries to reduce traffic by adding highway lanes. Initially traffic improves, but within two years it's worse than before. Why? The system responded: easier commutes attracted more drivers, developers built more suburbs, and the induced demand filled the new capacity. A systems view would have predicted this and suggested alternatives like congestion pricing or transit investment that change the feedback loops.",
                        prompts: [
                            "What are all the components or stakeholders in this system? How are they connected?",
                            "What feedback loops exist? Are they reinforcing (amplifying) or balancing (stabilizing)?",
                            "What are the delays in this system? How long before actions produce effects?",
                            "If you made your proposed change, what secondary effects might ripple through the system?"
                        ],
                        warnings: [
                            "Systems are often counter-intuitive: obvious solutions can backfire",
                            "Delays between action and effect make it hard to learn from feedback",
                            "You can't understand a system just by understanding its parts - emergence is real"
                        ],
                        relatedModels: ["Second-Order Thinking", "Root Cause Analysis", "First Principles"]
                    },
                    {
                        name: "Problem Definition",
                        description: "Are you solving the right problem?",
                        explanation: "Most failed solutions fail not because the solution was wrong, but because the problem was poorly defined. Problem Definition forces you to step back and articulate exactly what you're trying to solve before jumping to solutions. Einstein reportedly said he'd spend 55 minutes defining the problem and 5 minutes solving it. A well-defined problem often contains the seed of its own solution.",
                        example: "A company's sales are declining. The knee-jerk problem definition is 'we need more leads.' But deeper examination reveals the close rate dropped 40% - they have plenty of leads, they're just not converting. The real problem is sales effectiveness, not lead generation. Solving the wrong problem would have wasted the marketing budget while the real issue persisted.",
                        prompts: [
                            "Can you state the problem in one sentence? Now state it differently three more times - what shifts?",
                            "What would 'solved' look like? Be specific about the end state you want.",
                            "Whose problem is this, really? Is it your problem to solve?",
                            "What's the problem behind the problem? What triggered you to notice this issue now?"
                        ],
                        warnings: [
                            "The way you frame the problem constrains the solutions you can see",
                            "Stakeholders may define the same problem very differently",
                            "Symptoms and root problems often look alike - don't confuse them"
                        ],
                        relatedModels: ["Root Cause Analysis", "Reframing", "First Principles"]
                    },
                    {
                        name: "Base Rate Analysis",
                        description: "What does the data say before your specifics?",
                        explanation: "Base Rate Analysis means checking how often something actually happens in general before assuming your situation is special. We tend to focus on the vivid details of our specific case and ignore the broader statistical reality. If 90% of startups fail, your startup needs extraordinary reasons to expect different odds - not just optimism. Base rates are the starting point; your specifics adjust from there, not the other way around.",
                        example: "You're considering opening a restaurant because you're a great cook and friends love your food. Before planning, check the base rate: roughly 60% of restaurants fail in the first year, 80% within five years. Your cooking skill is real, but it's only one factor. The base rate tells you the default outcome, so you can honestly assess whether your specific advantages are strong enough to beat it.",
                        prompts: [
                            "For situations like this, what's the general success/failure rate? What does the data show?",
                            "What makes you think your specific case will differ from the typical outcome?",
                            "Are you weighting your personal story more than the statistical reality?",
                            "What's the reference class? What category of situations does this actually belong to?"
                        ],
                        warnings: [
                            "Base rates feel impersonal - that's exactly why people ignore them",
                            "Your situation IS unique in some ways, but unique doesn't mean exempt from statistics",
                            "Good base rate data isn't always available - don't fabricate precision"
                        ],
                        relatedModels: ["Confirmation Bias Recognition", "Expected Value", "Occam's Razor"]
                    },
                    {
                        name: "Survivorship Bias Recognition",
                        description: "You're only seeing the winners",
                        explanation: "Survivorship Bias occurs when you draw conclusions from visible successes while ignoring the invisible failures. When you study only the companies that survived, the people who succeeded, or the strategies that worked, you get a dangerously distorted picture. The failures - which often used the exact same strategies - are silent and invisible. You need to actively seek out the data on what didn't work.",
                        example: "Business books study successful CEOs who dropped out of college - Gates, Zuckerberg, Jobs - and conclude that dropping out can lead to success. But for every college dropout billionaire, there are millions of dropouts who struggled financially. The dropouts who failed don't write bestselling memoirs. The visible survivors create an illusion that the strategy itself was sound.",
                        prompts: [
                            "Who or what didn't survive this process? What happened to the failures?",
                            "Are you drawing lessons only from successes? What would the failures teach you?",
                            "Is the advice you're following based on a complete picture or just the visible winners?",
                            "If 100 people tried this exact approach, how many would succeed vs. fail?"
                        ],
                        warnings: [
                            "Success stories are louder than failure stories - adjust your information diet accordingly",
                            "The plural of anecdote is not data, especially when the anecdotes are cherry-picked",
                            "Even valid lessons from survivors may not be the actual cause of their survival"
                        ],
                        relatedModels: ["Base Rate Analysis", "Confirmation Bias Recognition", "Availability Bias Recognition"]
                    },
                    {
                        name: "Availability Bias Recognition",
                        description: "Recent and vivid isn't the same as common",
                        explanation: "Availability Bias makes us overweight information that comes to mind easily - recent events, dramatic stories, personal experiences - and underweight information that's harder to recall but more representative. After seeing a plane crash on the news, you feel flying is dangerous, even though the drive to the airport is statistically far riskier. The ease of recall tricks your brain into thinking something is more frequent or important than it actually is.",
                        example: "After a high-profile data breach makes the news, a company's leadership pushes to spend $2M on cybersecurity - while ignoring the mundane-but-costly employee turnover problem that's been draining $5M annually. The breach is vivid and available; the turnover is chronic and invisible. Availability bias redirects resources toward what feels urgent rather than what's actually most impactful.",
                        prompts: [
                            "Is your assessment based on data, or on what comes to mind most easily?",
                            "What recent, vivid, or emotional events might be skewing your perception?",
                            "If you hadn't seen/heard about [that specific event], would you still feel the same way?",
                            "What boring, chronic, undramatic factors might actually be more important here?"
                        ],
                        warnings: [
                            "Your gut feeling about frequency or risk is almost certainly influenced by what's top of mind",
                            "News media amplifies the dramatic and rare, not the common and important",
                            "Personal experience, while valid, is a tiny and biased sample"
                        ],
                        relatedModels: ["Survivorship Bias Recognition", "Base Rate Analysis", "Confirmation Bias Recognition"]
                    },
                    {
                        name: "Stakeholder Mapping",
                        description: "Who is affected and who has influence?",
                        explanation: "Stakeholder Mapping identifies everyone who has a stake in the outcome - those affected by it, those who can influence it, and those with the power to block or enable it. Most decisions fail not on technical merit but on the people dimension: someone with influence was overlooked, someone affected wasn't consulted, or competing interests weren't surfaced. Map the landscape of people before mapping the landscape of options.",
                        example: "A product team wants to redesign the checkout flow. Obvious stakeholders: customers, designers, engineers. Less obvious: the customer support team (who handles complaints about the current flow), the finance team (who depends on specific data the flow captures), legal (who has compliance requirements), and the sales team (who promised specific features to enterprise clients). Missing any of these means surprises later.",
                        prompts: [
                            "Who will be directly affected by this decision or its outcomes?",
                            "Who has the power to approve, block, or undermine this?",
                            "Whose perspective haven't you considered yet? Who's not in the room?",
                            "What does each key stakeholder need, fear, or want from this situation?"
                        ],
                        warnings: [
                            "The most important stakeholder is often the one you forgot to list",
                            "Influence and authority aren't the same - informal influencers matter enormously",
                            "Don't just map stakeholders - actually talk to them"
                        ],
                        relatedModels: ["Perspective-Taking", "Systems Thinking", "Incentives"]
                    },
                    {
                        name: "SWOT Analysis",
                        description: "Map strengths, weaknesses, opportunities, and threats",
                        explanation: "SWOT is a structured framework for assessing a situation across four dimensions: Strengths (internal advantages), Weaknesses (internal disadvantages), Opportunities (external possibilities), and Threats (external risks). Its power is in forcing a balanced assessment - optimists tend to see only strengths and opportunities, while pessimists see only weaknesses and threats. A complete SWOT gives you the full picture.",
                        example: "A freelance designer considering going full-time at a startup. Strengths: deep design skills, existing portfolio, startup experience. Weaknesses: no management experience, limited financial runway. Opportunities: equity upside, growing market, chance to build a team. Threats: startup may fail, losing freelance client relationships, health insurance gap. Seeing all four quadrants makes the decision more grounded.",
                        prompts: [
                            "What are the genuine strengths and advantages you bring to this situation?",
                            "What are the honest weaknesses, gaps, or vulnerabilities?",
                            "What external opportunities exist that you could capitalize on?",
                            "What external threats or risks could undermine you, regardless of how well you execute?"
                        ],
                        warnings: [
                            "Be brutally honest in the Weaknesses and Threats quadrants - this is where self-deception hides",
                            "Strengths can become weaknesses in a different context (and vice versa)",
                            "SWOT is a snapshot - revisit it as conditions change"
                        ],
                        relatedModels: ["Stakeholder Mapping", "Constraint Identification", "First Principles"]
                    },
                    {
                        name: "Perspective-Taking",
                        description: "How does this look from the other side?",
                        explanation: "Perspective-Taking means deliberately stepping out of your own viewpoint and inhabiting someone else's. This isn't just empathy (feeling what others feel) - it's cognitive work: understanding their information, incentives, constraints, fears, and goals. Most conflicts and misunderstandings stem from each party being unable to see the situation through the other's eyes. The most effective leaders, negotiators, and problem-solvers do this habitually.",
                        example: "An engineering lead is frustrated that the product manager keeps changing requirements. From the PM's perspective: customers are churning, the CEO is demanding pivots, and the PM is caught between conflicting pressures with limited time to communicate context. Understanding this doesn't make the changes less frustrating, but it shifts the conversation from blame to collaborative problem-solving.",
                        prompts: [
                            "Pick the person most affected by this. What does this situation look like from their position?",
                            "What information do they have that you don't? What do you know that they don't?",
                            "What are they afraid of? What's their best-case outcome?",
                            "If you were advising them, what would you tell them to do?"
                        ],
                        warnings: [
                            "Don't confuse imagining their perspective with actually asking them - do both",
                            "You're projecting your own mental model onto them unless you've verified",
                            "Multiple stakeholders means multiple perspectives - don't flatten them into one"
                        ],
                        relatedModels: ["Stakeholder Mapping", "Incentives", "Confirmation Bias Recognition"]
                    },
                    {
                        name: "Constraint Identification",
                        description: "What are the real limits vs. the assumed ones?",
                        explanation: "Constraint Identification separates genuine, immovable constraints (laws of physics, legal requirements, hard deadlines) from assumed constraints (habits, conventions, fears, untested beliefs). Most people overestimate how constrained they are. What feels like a wall is often just a fence you haven't tried to look over. Identifying which constraints are real focuses your effort on what can actually change.",
                        example: "A team says they can't ship a feature in Q1 because 'it requires a database migration that takes 3 months.' Probing deeper: the migration takes 3 months because it's always been done that way. The actual constraint is 2 hours of downtime for the migration itself - the rest is process overhead that could be compressed. The real constraint and the assumed constraint were very different.",
                        prompts: [
                            "List every constraint you're operating under. Now mark each as 'hard' (immovable) or 'soft' (assumed/conventional).",
                            "For each soft constraint: what would happen if you ignored it? What's the actual consequence?",
                            "Who imposed this constraint? Is it still valid? Has anyone challenged it?",
                            "What would you do if you had twice the time? Half the time? No budget? Unlimited budget?"
                        ],
                        warnings: [
                            "Some assumed constraints exist for good reasons you haven't discovered yet - investigate before ignoring",
                            "Real constraints can change over time - revisit them periodically",
                            "Political and cultural constraints are real even if they're not 'hard' constraints"
                        ],
                        relatedModels: ["First Principles", "Constraint Removal", "Reframing"]
                    }
                ]
            },
            evaluative: {
                title: "Evaluative Models",
                purpose: "Weigh options and determine what matters most",
                coreQuestion: "How do these alternatives compare?",
                whenToUse: "When comparing alternatives, allocating resources, prioritizing actions, or determining trade-offs.",
                models: [
                    {
                        name: "Opportunity Cost",
                        description: "What you give up for this choice",
                        explanation: "Opportunity cost is the value of the next-best alternative you give up when making a choice. Every decision has a cost beyond the obvious price tag - the cost of what you could have done instead. This concept, fundamental to economics, reminds us that resources (time, money, attention) spent on one thing cannot be spent on another. The true cost of anything is what you sacrifice to get it.",
                        example: "You're deciding whether to spend $50,000 on an MBA. The obvious cost is tuition. But the opportunity cost includes: 2 years of salary you won't earn (~$150,000), work experience you won't gain, relationships you won't build at work, and other ways you could invest that $50,000. The real question isn't 'Is an MBA worth $50,000?' but 'Is an MBA worth $200,000+ and two years of your life compared to the alternatives?'",
                        prompts: [
                            "If you choose this option, what specifically are you giving up? List the top 3 alternatives.",
                            "What could you do with the same time, money, or resources instead?",
                            "What's the best alternative use of this resource? How does it compare?",
                            "Are you accounting for hidden costs like time, energy, and attention - not just money?"
                        ],
                        warnings: [
                            "Sunk costs are NOT opportunity costs - don't factor in what you've already spent",
                            "Opportunity cost includes intangibles like learning, relationships, and optionality",
                            "The comparison should be to your best alternative, not just any alternative"
                        ],
                        relatedModels: ["Cost-Benefit Analysis", "Satisficing vs. Optimizing", "Pareto Principle (80/20)"]
                    },
                    {
                        name: "Incentives",
                        description: "What drives the behavior",
                        explanation: "Incentives are the rewards and punishments that motivate behavior. Charlie Munger famously said, 'Show me the incentive and I will show you the outcome.' People respond predictably to incentives - often in ways that weren't intended. Understanding incentives helps you predict behavior, design better systems, and avoid being manipulated. When behavior seems irrational, you probably don't understand the incentives.",
                        example: "Wells Fargo created incentives for employees to open new accounts, with bonuses tied to account numbers. The intended outcome: more customer engagement. The actual outcome: employees opened millions of fake accounts without customer consent. The incentive rewarded the metric (account numbers) rather than the goal (customer value). Understanding this would have predicted the scandal.",
                        prompts: [
                            "What are the explicit incentives in this situation? Who gets rewarded for what?",
                            "What are the hidden or implicit incentives? What behavior does the system actually reward?",
                            "If you follow the incentives to their logical conclusion, what behavior would you predict?",
                            "Are the incentives aligned with the actual goals? Where might they diverge?"
                        ],
                        warnings: [
                            "People optimize for what's measured, not necessarily what matters",
                            "Incentives you didn't design still exist - look for them",
                            "Short-term incentives often conflict with long-term goals"
                        ],
                        relatedModels: ["Second-Order Thinking", "Systems Thinking", "Confirmation Bias Recognition"]
                    },
                    {
                        name: "Second-Order Thinking",
                        description: "Consider downstream consequences",
                        explanation: "Second-order thinking means considering the consequences of the consequences. First-order thinking asks 'What happens if I do X?' Second-order thinking asks 'And then what?' Most people stop at first-order effects, which is why second-order thinkers have a significant advantage. The immediate effect of a decision is often obvious; the downstream effects are where surprises - and opportunities - live.",
                        example: "First-order thinking: 'If we cut prices, we'll sell more units.' Second-order thinking: 'If we cut prices, we'll sell more units. Then competitors will cut prices too. Then margins shrink industry-wide. Then we need to cut costs. Then quality suffers. Then customers leave.' The first-order effect (more sales) was positive; the second and third-order effects were devastating.",
                        prompts: [
                            "What's the immediate, obvious effect of this decision? (First-order)",
                            "Then what happens? What do others do in response? (Second-order)",
                            "And then what? Follow the chain at least 3 steps. (Third-order and beyond)",
                            "Who else is affected, and how will they respond? What feedback loops exist?"
                        ],
                        warnings: [
                            "Second-order effects often oppose first-order effects",
                            "The further out you project, the more uncertain - but still valuable to consider",
                            "Others' responses to your actions create most second-order effects"
                        ],
                        relatedModels: ["Systems Thinking", "Incentives", "Pre-mortem"]
                    },
                    {
                        name: "Cost-Benefit Analysis",
                        description: "Does the gain justify the cost",
                        explanation: "Cost-benefit analysis is a systematic approach to weighing the total expected costs against the total expected benefits of a decision. While it sounds simple, the challenge is identifying ALL costs and benefits - including indirect, delayed, and intangible ones. A rigorous cost-benefit analysis forces you to quantify your assumptions and reveals hidden trade-offs.",
                        example: "A company considers implementing a four-day work week. Obvious costs: 20% less work time. Hidden costs: coordination challenges, customer coverage gaps, potential resentment from those who can't participate. Obvious benefits: employee satisfaction, recruitment advantage. Hidden benefits: forced prioritization, reduced burnout, lower turnover costs, increased productivity per hour. Only by listing all factors can you make an informed decision.",
                        prompts: [
                            "List ALL costs: direct, indirect, immediate, delayed, tangible, and intangible.",
                            "List ALL benefits: direct, indirect, immediate, delayed, tangible, and intangible.",
                            "Can you quantify these? Even rough estimates force clearer thinking.",
                            "What costs or benefits might you be missing? What would a critic add to your list?"
                        ],
                        warnings: [
                            "Intangible costs/benefits are real even if hard to quantify - don't ignore them",
                            "Be wary of motivated reasoning - are you inflating benefits and minimizing costs?",
                            "Consider who bears the costs vs. who receives the benefits"
                        ],
                        relatedModels: ["Opportunity Cost", "Expected Value", "Second-Order Thinking"]
                    },
                    {
                        name: "Expected Value",
                        description: "Probability-weighted outcomes",
                        explanation: "Expected value (EV) is a decision-making framework that accounts for both the magnitude of outcomes and their probability. You calculate it by multiplying each possible outcome by its probability and summing the results. EV helps you make decisions under uncertainty by focusing on long-term average outcomes rather than individual results. A positive expected value decision may lose sometimes, but wins on average.",
                        example: "You're offered a bet: flip a coin, heads you win $200, tails you lose $100. Should you take it? EV = (50% × $200) + (50% × -$100) = $100 - $50 = $50. The expected value is +$50, so mathematically you should take this bet every time. Even though you'll lose half the time, over many decisions like this, you'll come out ahead.",
                        prompts: [
                            "What are all the possible outcomes of this decision? List them.",
                            "What's your estimated probability for each outcome? (They should sum to 100%)",
                            "What's the value (positive or negative) of each outcome?",
                            "Calculate: For each outcome, multiply probability × value, then sum all results."
                        ],
                        warnings: [
                            "Garbage in, garbage out - your EV is only as good as your probability estimates",
                            "EV assumes you can play multiple times; one-shot decisions may need different thinking",
                            "EV doesn't account for risk tolerance or ruin - don't bet your entire bankroll on positive EV"
                        ],
                        relatedModels: ["Cost-Benefit Analysis", "Margin of Safety", "Reversible vs. Irreversible Decisions"]
                    },
                    {
                        name: "Pareto Principle (80/20)",
                        description: "Find disproportionate impact",
                        explanation: "The Pareto Principle observes that roughly 80% of effects come from 20% of causes. This pattern appears everywhere: 80% of sales from 20% of customers, 80% of bugs from 20% of code, 80% of results from 20% of effort. The exact ratio varies, but the insight is universal: inputs and outputs are not evenly distributed. Finding and focusing on the vital few rather than the trivial many is the key to efficiency.",
                        example: "A software company analyzes customer support tickets and finds that 80% of complaints come from 3 features (out of 50). Instead of spreading improvement efforts across all features equally, they focus intensely on those 3. Six months later, support tickets dropped 60% with only 6% of features improved. The same principle: a small number of causes drive most of the problems.",
                        prompts: [
                            "In this situation, what 20% of inputs might be driving 80% of the results?",
                            "What are the few vital factors vs. the many trivial ones?",
                            "If you could only work on one thing, which would have the most disproportionate impact?",
                            "What are you spending time on that contributes little to outcomes?"
                        ],
                        warnings: [
                            "80/20 is a guideline, not a law - the actual ratio varies",
                            "The vital 20% changes over time; reassess regularly",
                            "Don't neglect the 'trivial many' entirely - some provide necessary foundation"
                        ],
                        relatedModels: ["Leverage", "80/20 Action", "Opportunity Cost"]
                    },
                    {
                        name: "Satisficing vs. Optimizing",
                        description: "Good enough vs. perfect",
                        explanation: "Satisficing means choosing an option that meets your criteria, even if better options might exist. Optimizing means searching until you find the best possible option. Economist Herbert Simon introduced satisficing, recognizing that optimization has costs: time, energy, and decision fatigue. Often, the search for 'perfect' costs more than the improvement it yields. Knowing when to satisfice and when to optimize is itself an optimization.",
                        example: "Buying a house: An optimizer visits 50 houses over 6 months, running spreadsheets on each, only to find their top choice sold while they were analyzing. A satisficer defines criteria (3 bedrooms, good schools, under budget), views houses until one meets all criteria, and buys it. The satisficer may not get the 'best' house, but avoids analysis paralysis and opportunity cost of endless searching.",
                        prompts: [
                            "What criteria would make an option 'good enough' for this decision?",
                            "What's the cost of continued searching? Time, stress, missed opportunities?",
                            "Is this a reversible decision where satisficing is low-risk, or irreversible where optimizing pays off?",
                            "Are you optimizing because it matters, or because you're avoiding the discomfort of deciding?"
                        ],
                        warnings: [
                            "Satisficing isn't settling - it's strategic acceptance that perfect is costly",
                            "High-stakes, irreversible decisions may warrant more optimization",
                            "The best decision made today often beats a perfect decision made too late"
                        ],
                        relatedModels: ["Opportunity Cost", "Reversible vs. Irreversible Decisions", "Pareto Principle (80/20)"]
                    },
                    {
                        name: "Regret Minimization",
                        description: "Which choice will you regret least in 10 years?",
                        explanation: "Regret Minimization, popularized by Jeff Bezos, means projecting yourself to age 80 and asking which choice minimizes your total lifetime regret. This framework cuts through analysis paralysis by shifting from 'what's optimal right now' to 'what can I live with long-term.' It naturally weights bold action over inaction - because we typically regret the things we didn't do more than the things we did.",
                        example: "Bezos had a well-paying job on Wall Street when he had the idea for Amazon. Analytically, leaving was risky. But he applied regret minimization: 'When I'm 80, will I regret leaving Wall Street? No. Will I regret not trying this internet thing I'm excited about? Yes.' The framework made the decision clear even though the spreadsheet didn't.",
                        prompts: [
                            "Project yourself 10 years into the future. Which choice would you regret NOT making?",
                            "Which option is a risk of commission (doing something) vs. omission (not doing something)? Which type of regret is harder to live with for you?",
                            "If this fails, will you regret trying? Or will the experience itself have value?",
                            "Are you avoiding a choice because of fear, or because it's genuinely the wrong move?"
                        ],
                        warnings: [
                            "This framework biases toward action - sometimes inaction really is the right choice",
                            "Future-you may have different values than present-you - don't assume perfect consistency",
                            "Regret minimization works best for big, hard-to-reverse life decisions, not routine ones"
                        ],
                        relatedModels: ["Reversible vs. Irreversible Decisions", "Values Alignment", "Opportunity Cost"]
                    },
                    {
                        name: "Sunk Cost Awareness",
                        description: "Past investments shouldn't drive future decisions",
                        explanation: "The Sunk Cost Fallacy is our tendency to continue investing in something because of what we've already put in, rather than because of what we expect to get out. The money, time, or effort already spent is gone regardless of what you do next. Rational decisions are based only on future costs and benefits. Yet we consistently throw good money after bad, stay in failing relationships, and finish terrible books - all because of what we've already invested.",
                        example: "A company has spent $3M building a product that market testing shows nobody wants. The CEO argues 'we can't waste the $3M we've already invested.' But that $3M is gone whether they continue or stop. The real question is: 'Is the NEXT $1M better spent finishing this unwanted product or starting something new?' Sunk cost thinking would waste another $1M; forward-looking thinking would redirect it.",
                        prompts: [
                            "If you hadn't already invested time/money/effort, would you start this today?",
                            "Are you continuing because of future potential or because of past investment?",
                            "What would you advise a friend who described this exact situation to you?",
                            "What's the opportunity cost of continuing? What else could those future resources do?"
                        ],
                        warnings: [
                            "Sometimes persistence IS the right call - distinguish sunk cost fallacy from genuine long-term investment",
                            "Reputational costs of quitting are real and forward-looking, not sunk",
                            "Emotional investment is the hardest sunk cost to recognize"
                        ],
                        relatedModels: ["Opportunity Cost", "Zero-Based Thinking", "Regret Minimization"]
                    },
                    {
                        name: "Short-term vs Long-term Tradeoffs",
                        description: "Is this optimizing for now or for later?",
                        explanation: "Almost every decision involves tension between short-term and long-term outcomes. Eating the cake is great now, bad later. Exercising is painful now, great later. Organizations face the same tradeoffs: cutting R&D boosts this quarter's profit but erodes future competitiveness. Making this tradeoff explicit - rather than defaulting to whichever timeframe feels most urgent - leads to dramatically better decisions.",
                        example: "A startup can either (A) take on technical debt to ship fast and win customers now, or (B) build it right, ship slower, but have a maintainable codebase for years. Neither is universally right. The question is: what's the right time horizon? If you need to prove market fit before funding runs out, (A) might be survival. If you've already proven fit, (B) prevents a future rewrite that costs 10x more.",
                        prompts: [
                            "What's the short-term benefit of this choice? What's the long-term cost?",
                            "What's the short-term cost of the alternative? What's the long-term benefit?",
                            "What's the right time horizon for this decision? 1 month? 1 year? 10 years?",
                            "Are you defaulting to short-term thinking because of urgency, pressure, or discomfort?"
                        ],
                        warnings: [
                            "Long-term thinking can become an excuse for never shipping or deciding",
                            "You have to survive the short term to benefit from the long term",
                            "The 'long term' is not a single point - different long-term horizons can give different answers"
                        ],
                        relatedModels: ["Second-Order Thinking", "Compound Interest", "Regret Minimization"]
                    },
                    {
                        name: "Weighted Scoring / Decision Matrix",
                        description: "Score options against weighted criteria",
                        explanation: "A Decision Matrix makes evaluation explicit and structured. You list your options as rows, your criteria as columns, weight each criterion by importance, then score each option against each criterion. The math forces you to confront tradeoffs you might otherwise wave away. It doesn't make the decision for you - but it shows you exactly what you're trading off and prevents you from unconsciously overweighting one factor.",
                        example: "Choosing between three job offers. Criteria (weighted 1-5): compensation (4), growth potential (5), work-life balance (3), team quality (4), mission alignment (3). Score each job 1-10 on each criterion, multiply by weight, sum. Job A might win on compensation but Job B wins overall because it scores highest on the heavily-weighted growth potential. The matrix reveals what your priorities actually produce.",
                        prompts: [
                            "What are your 4-6 most important criteria for this decision? Can you rank them by importance?",
                            "Score each option against each criterion. Where are the surprising gaps?",
                            "Does the mathematical winner match your gut feeling? If not, what criterion are you underweighting?",
                            "What would change the result? Which scores are uncertain and worth investigating?"
                        ],
                        warnings: [
                            "Garbage in, garbage out - the matrix is only as good as your criteria and honest scoring",
                            "If the result feels wrong, that's useful data - explore why rather than dismissing the tool",
                            "Don't use false precision - a 7.2 vs 7.3 difference is noise, not signal"
                        ],
                        relatedModels: ["Cost-Benefit Analysis", "Satisficing vs. Optimizing", "Values Alignment"]
                    },
                    {
                        name: "Sensitivity Analysis",
                        description: "Which assumptions, if wrong, would change your answer?",
                        explanation: "Sensitivity Analysis tests how robust your decision is by asking: what if my key assumptions are wrong? You identify the critical assumptions underlying your choice, then vary them - what if costs are 50% higher? What if the timeline doubles? What if demand is half of projections? If your decision still holds under these variations, it's robust. If a small change in one assumption flips the answer, that assumption deserves much more scrutiny.",
                        example: "A business case for a new product assumes $1M revenue in year one. Sensitivity analysis: what if revenue is only $500K? The project still breaks even in year two - acceptable. What if customer acquisition cost is $200 instead of $100? The project never breaks even. Now you know: revenue estimates can be off and you're fine, but CAC assumptions are the critical variable that needs real validation.",
                        prompts: [
                            "What are the 3-4 biggest assumptions your decision rests on?",
                            "For each assumption: what if it's 50% worse than expected? Does the decision change?",
                            "Which single assumption, if wrong, would most change the outcome?",
                            "How confident are you in each key assumption? Where do you have real data vs. guesses?"
                        ],
                        warnings: [
                            "Don't just test small variations - test dramatically different scenarios",
                            "Correlated risks: sometimes multiple assumptions fail together (economic downturns affect both revenue AND costs)",
                            "Unknown unknowns - sensitivity analysis only tests the assumptions you've identified"
                        ],
                        relatedModels: ["Expected Value", "Margin of Safety", "Pre-mortem"]
                    },
                    {
                        name: "Values Alignment",
                        description: "Does this align with who you want to be?",
                        explanation: "Values Alignment asks whether a choice is consistent with your core principles - not just whether it's profitable or efficient, but whether it's the kind of decision the person or organization you want to be would make. This isn't soft or idealistic; values misalignment creates internal friction, erodes trust, and leads to decisions you can't defend when questioned. Sustainable success requires that strategy and values point in the same direction.",
                        example: "A company can increase margins by 15% by switching to a cheaper supplier with questionable labor practices. The spreadsheet says yes. But the company's stated values include ethical sourcing, and their customers chose them partly for that reason. The margin gain is real but the values misalignment would create employee disillusionment, PR risk, and brand erosion. The 'right' financial decision is the wrong actual decision.",
                        prompts: [
                            "What are your 3-5 core values (personal or organizational)? Does this decision align with all of them?",
                            "If this decision were made public - to your team, your customers, your family - would you be comfortable?",
                            "Are you compromising a value for a short-term gain? What's the long-term cost of that compromise?",
                            "Which option would make you most proud when you look back on it?"
                        ],
                        warnings: [
                            "Values without tradeoffs aren't values - they're platitudes. Real values cost you something.",
                            "Don't confuse stated values with revealed values (what you actually do under pressure)",
                            "Values can conflict with each other - 'loyalty' vs 'honesty,' for example. Be honest about the tension."
                        ],
                        relatedModels: ["Regret Minimization", "Incentives", "Second-Order Thinking"]
                    },
                    {
                        name: "Eisenhower Matrix",
                        description: "Urgent vs. important - are you confusing the two?",
                        explanation: "The Eisenhower Matrix separates tasks and decisions into four quadrants based on urgency (needs attention now) and importance (matters for long-term goals). Most people spend their time on urgent-but-not-important tasks (emails, interruptions) while neglecting important-but-not-urgent work (planning, relationships, health). The matrix forces you to ask: am I spending my time and attention on what actually matters, or just on what's screaming loudest?",
                        example: "A manager's week: urgent emails, last-minute meetings, firefighting production issues (urgent), plus a hiring plan, team development conversations, and process improvements (important but not urgent). Without the matrix, the urgent stuff fills every hour. The important work - which determines whether next quarter is better - keeps getting pushed to 'next week.' The matrix makes this pattern visible and fixable.",
                        prompts: [
                            "Is this truly urgent, or does it just feel urgent? What happens if you wait a week?",
                            "Is this truly important, or is it just visible and noisy?",
                            "What important-but-not-urgent work have you been neglecting? What's the cost of continued neglect?",
                            "Can the urgent items be delegated, automated, or eliminated so you can focus on what's important?"
                        ],
                        warnings: [
                            "Other people's urgency is not your importance - protect your priorities",
                            "Truly urgent AND important items do exist - don't over-philosophize during a real crisis",
                            "The matrix is about allocation of attention and time, not just task sorting"
                        ],
                        relatedModels: ["Pareto Principle (80/20)", "Opportunity Cost", "Satisficing vs. Optimizing"]
                    }
                ]
            },
            protective: {
                title: "Protective Models",
                purpose: "Reduce risk and avoid disaster",
                coreQuestion: "How do I prevent failure?",
                whenToUse: "Before major commitments, when downside is severe, in high-uncertainty situations, when building systems or strategies.",
                models: [
                    {
                        name: "Margin of Safety",
                        description: "Build in extra buffer capacity",
                        explanation: "Margin of safety means building in a buffer between what you need and what you have. Engineers design bridges to hold 10x their expected load. Value investors buy stocks at significant discounts to their calculated worth. The margin accounts for errors in your estimates, unexpected events, and the fundamental uncertainty of the future. The greater the stakes and uncertainty, the larger the margin should be.",
                        example: "You're planning a product launch with a deadline of March 1st. Your best estimate says you'll finish February 15th. Without margin of safety, you commit to March 1st. With margin of safety, you recognize that estimates are often wrong - unexpected bugs, sick team members, scope changes. You either commit to March 15th (giving yourself buffer) or work backward from March 1st and plan to finish January 15th internally.",
                        prompts: [
                            "What's the minimum you need for this to work? Now, what buffer should you add?",
                            "What could go wrong that would consume your margin? Is your buffer large enough?",
                            "Where are you cutting it too close? What happens if your estimates are 50% off?",
                            "How severe would failure be? (Higher stakes = larger margin needed)"
                        ],
                        warnings: [
                            "Too much margin can be wasteful or cause you to miss opportunities",
                            "Margin of safety is not a substitute for good planning - it's insurance against uncertainty",
                            "The margin should scale with the stakes and your uncertainty level"
                        ],
                        relatedModels: ["Expected Value", "Pre-mortem", "Redundancy"]
                    },
                    {
                        name: "Inversion",
                        description: "Ask how to fail, then avoid that",
                        explanation: "Inversion means approaching a problem backward. Instead of asking 'How do I achieve success?' ask 'How do I guarantee failure?' Then avoid those things. Carl Jacobi, the mathematician, said 'Invert, always invert.' Many problems are easier to solve in reverse. Avoiding stupidity is often easier than seeking brilliance. If you avoid all the ways to fail, what remains is more likely to succeed.",
                        example: "Instead of asking 'How do I build a great company?' ask 'How do I guarantee my company fails?' Answers: ignore customers, hire poorly, run out of cash, move slowly, have no clear strategy, let politics dominate. Now you have a clear list of things to avoid. Success isn't guaranteed, but failure becomes less likely.",
                        prompts: [
                            "What would guarantee failure in this situation? List at least 5 ways.",
                            "Which of these failure modes are you currently at risk of?",
                            "What's the opposite of success here? How do you avoid that?",
                            "If a competitor wanted to sabotage this, what would they do?"
                        ],
                        warnings: [
                            "Inversion reveals what to avoid, but doesn't automatically tell you what to do",
                            "Some failure modes are more likely than others - prioritize avoiding the probable ones",
                            "Don't become so focused on avoiding failure that you become paralyzed"
                        ],
                        relatedModels: ["Pre-mortem", "Confirmation Bias Recognition", "First Principles"]
                    },
                    {
                        name: "Reversible vs. Irreversible Decisions",
                        description: "Can you undo this decision",
                        explanation: "Jeff Bezos distinguishes between Type 1 decisions (irreversible, high-stakes - walk through a one-way door) and Type 2 decisions (reversible, lower-stakes - walk through a two-way door you can return through). Type 1 decisions warrant extensive analysis and caution. Type 2 decisions should be made quickly by individuals or small groups. Most decisions are Type 2, but we often treat them as Type 1, causing slowness and missed opportunities.",
                        example: "Hiring a senior executive is Type 1 - hard to undo, high impact, warrants extensive vetting. Choosing which A/B test to run is Type 2 - easily reversible, limited downside, should be decided quickly. Many organizations agonize over Type 2 decisions as if they were Type 1, creating bureaucracy and slowness. Recognize the difference and match your decision-making process to the decision type.",
                        prompts: [
                            "If this decision turns out to be wrong, can you reverse it? At what cost?",
                            "Is this a one-way door (Type 1) or a two-way door (Type 2)?",
                            "Are you treating a reversible decision with irreversible-level caution? Why?",
                            "What would make this decision more reversible? Can you structure it that way?"
                        ],
                        warnings: [
                            "Some decisions look reversible but have hidden switching costs",
                            "Time itself is irreversible - a reversible decision delayed is opportunity lost",
                            "Don't use 'it's reversible' as an excuse to avoid thinking"
                        ],
                        relatedModels: ["Satisficing vs. Optimizing", "Minimum Viable Product (MVP)", "Margin of Safety"]
                    },
                    {
                        name: "Pre-mortem",
                        description: "Identify failure modes in advance",
                        explanation: "A pre-mortem is a thought experiment: imagine your project has failed spectacularly, then work backward to identify what caused the failure. Unlike a post-mortem (which analyzes actual failure after the fact), a pre-mortem harnesses hindsight bias proactively. Research by Gary Klein shows that pre-mortems increase the ability to identify reasons for future outcomes by 30%. It's easier to generate reasons for a known outcome than to predict an unknown one.",
                        example: "Before launching a new product, gather your team and say: 'It's one year from now. The product launch was a disaster. What happened?' Team members write down reasons independently, then share. Common answers: 'We underestimated competitor response,' 'Key engineer quit mid-project,' 'Customer needs changed,' 'We missed a critical bug.' Now you have a risk register and can address these proactively.",
                        prompts: [
                            "Imagine this has failed completely. What went wrong? Generate at least 5 reasons.",
                            "Which of these failure modes are most likely? Most severe?",
                            "What can you do NOW to prevent or mitigate these failure modes?",
                            "What early warning signs would indicate you're heading toward failure?"
                        ],
                        warnings: [
                            "Pre-mortems reveal risks but don't eliminate them - you must act on the insights",
                            "Don't let the exercise create excessive pessimism or paralysis",
                            "Revisit your pre-mortem periodically as conditions change"
                        ],
                        relatedModels: ["Inversion", "Margin of Safety", "Second-Order Thinking"]
                    },
                    {
                        name: "Antifragility",
                        description: "Benefit from volatility",
                        explanation: "Antifragility, coined by Nassim Taleb, describes things that gain from disorder, stress, and volatility. Fragile things break under stress (a glass). Robust things resist stress (a rock). Antifragile things get stronger from stress (muscles, immune systems, some businesses). In an uncertain world, being antifragile is better than being robust. Instead of just protecting against volatility, position yourself to benefit from it.",
                        example: "A restaurant with one location is fragile - a local recession destroys it. A franchise system is robust - problems in one location don't kill the business. A restaurant consulting business is antifragile - during recessions, struggling restaurants need more help, increasing demand. The consultant benefits from the same volatility that harms individual restaurants.",
                        prompts: [
                            "Is this fragile (harmed by stress), robust (unaffected), or antifragile (benefits from stress)?",
                            "How could you restructure to benefit from volatility rather than just survive it?",
                            "What stressors or challenges could actually make this stronger?",
                            "Where are you exposed to fragility? How can you reduce that exposure?"
                        ],
                        warnings: [
                            "Antifragility often requires accepting small losses to gain from big volatility",
                            "Not everything can or should be antifragile - sometimes robust is the right goal",
                            "Building antifragility takes time; fragile systems fail before they adapt"
                        ],
                        relatedModels: ["Margin of Safety", "Redundancy", "Optionality"]
                    },
                    {
                        name: "Redundancy",
                        description: "Prevent single points of failure",
                        explanation: "Redundancy means having backup systems, people, or resources that can take over if the primary fails. Single points of failure - where one component's failure brings down the whole system - are dangerous. Engineers build redundancy into critical systems: backup generators, RAID storage, multiple data centers. The cost of redundancy is usually far less than the cost of total failure.",
                        example: "A startup's CTO is the only person who understands the core codebase. If they get sick, quit, or get hit by a bus, the company is paralyzed. This is a single point of failure. Solutions: documentation, cross-training other engineers, pair programming, code reviews. The 'bus factor' asks: how many people would need to be hit by a bus before the project fails? You want that number to be high.",
                        prompts: [
                            "What are the single points of failure in this situation? (People, systems, resources)",
                            "If [critical component] failed, what would happen? How would you recover?",
                            "What's the cost of adding redundancy vs. the cost of failure?",
                            "What's your 'bus factor'? What happens if key people become unavailable?"
                        ],
                        warnings: [
                            "Redundancy costs money, time, and complexity - don't over-engineer",
                            "Redundant systems need testing; unused backups may not work when needed",
                            "Perfect redundancy is impossible; prioritize the most critical failure points"
                        ],
                        relatedModels: ["Margin of Safety", "Antifragility", "Critical Path"]
                    },
                    {
                        name: "Precautionary Principle",
                        description: "When unknown risks are too great",
                        explanation: "The Precautionary Principle states that when an action raises threats of harm that are uncertain but potentially catastrophic, precautionary measures should be taken even without full scientific certainty. It's asymmetric risk management: when the downside is unbounded or irreversible, the burden of proof should be on those claiming safety, not those claiming danger. This applies when you don't know what you don't know.",
                        example: "A pharmaceutical company has a drug that shows promising early results. Long-term effects are unknown. The precautionary principle suggests: don't rush to market based on short-term data when the downside (unforeseen side effects affecting millions) could be catastrophic and irreversible. The potential benefit of being first must be weighed against the potential harm of being wrong.",
                        prompts: [
                            "What's the worst-case scenario? Is it catastrophic or irreversible?",
                            "How well do you understand the risks? What are the known unknowns and unknown unknowns?",
                            "Who bears the burden of proof - those claiming safety or those claiming danger?",
                            "Is the potential upside worth the potential (even if uncertain) catastrophic downside?"
                        ],
                        warnings: [
                            "Over-application leads to paralysis; not every risk warrants extreme caution",
                            "The precautionary principle itself has costs - delayed benefits, missed opportunities",
                            "Use for potentially catastrophic/irreversible outcomes, not routine decisions"
                        ],
                        relatedModels: ["Margin of Safety", "Reversible vs. Irreversible Decisions", "Expected Value"]
                    },
                    {
                        name: "Devil's Advocate",
                        description: "Deliberately argue against the leading option",
                        explanation: "The Devil's Advocate technique assigns someone (or yourself) the role of forcefully arguing against the preferred option. Unlike Pre-mortem (imagining failure), this actively attacks the reasoning, evidence, and assumptions supporting the leading choice RIGHT NOW. It originated in the Catholic Church's canonization process, where an advocatus diaboli would argue against sainthood to ensure only the most deserving were canonized. The discomfort it creates is exactly the point.",
                        example: "A board is leaning toward acquiring a competitor. Everyone is excited about the synergies. A designated devil's advocate argues: 'The synergies are theoretical - integrations this size fail 60% of the time. Their best engineers will leave within 18 months. Their tech stack is incompatible with ours. We'd be paying 12x revenue for a company whose growth is already slowing.' Whether or not this changes the decision, it surfaces risks that enthusiasm was hiding.",
                        prompts: [
                            "Argue against your preferred option as forcefully as you can. What's the strongest case against it?",
                            "What evidence would someone who disagrees with you point to?",
                            "What are you dismissing or downplaying because it's inconvenient to your preferred conclusion?",
                            "If a smart, skeptical friend heard your plan, what would they challenge first?"
                        ],
                        warnings: [
                            "Don't dismiss the devil's advocate arguments just because they're uncomfortable",
                            "The goal is to strengthen your thinking, not to create paralysis",
                            "A weak devil's advocate (who argues poorly on purpose) is worse than none - take the role seriously"
                        ],
                        relatedModels: ["Steelmanning", "Confirmation Bias Recognition", "Pre-mortem"]
                    },
                    {
                        name: "Steelmanning",
                        description: "Build the strongest version of the opposing view",
                        explanation: "Steelmanning is the opposite of strawmanning. Instead of weakening an opposing argument to make it easier to dismiss, you strengthen it - constructing the most compelling possible version. If you can argue the opposing side better than its own advocates, and your position STILL holds, you can be genuinely confident. If you can't steelman the opposition, you probably don't understand it well enough to reject it.",
                        example: "You want to adopt a microservices architecture, and a colleague advocates staying monolithic. Instead of dismissing their view ('they're just afraid of change'), steelman it: 'A monolith reduces operational complexity, eliminates network latency between services, simplifies debugging, avoids data consistency challenges, and at our current scale, the deployment benefits of microservices don't yet outweigh the coordination costs.' Now you're engaging with the REAL argument, not a caricature.",
                        prompts: [
                            "What's the strongest possible case for the option you're leaning AGAINST?",
                            "Can you argue the opposing side well enough to convince a neutral observer?",
                            "What legitimate concerns or evidence does the other side have that you're underweighting?",
                            "If the opposing view is right, what would that imply? What would you see in the world?"
                        ],
                        warnings: [
                            "If your steelman feels weak, you probably don't understand the opposition well enough - keep going",
                            "Steelmanning requires intellectual honesty - it's tempting to secretly weaken the argument",
                            "This is about understanding, not agreeing - you may still reject the opposing view after steelmanning it"
                        ],
                        relatedModels: ["Devil's Advocate", "Perspective-Taking", "Confirmation Bias Recognition"]
                    },
                    {
                        name: "Anchoring Bias Check",
                        description: "Is an arbitrary reference point pulling your judgment?",
                        explanation: "Anchoring Bias occurs when an initial piece of information (the 'anchor') disproportionately influences subsequent judgments. The first number you hear in a negotiation, the original price on a sale tag, the initial estimate in a project - all become reference points that pull your thinking toward them, even when they're arbitrary or irrelevant. Being aware of anchors doesn't fully eliminate their effect, but it helps you deliberately re-anchor on more relevant data.",
                        example: "A house is listed at $500K. You negotiate down to $420K and feel great - you 'saved' $80K. But comparable homes sold for $380K-$400K. The listing price was an arbitrary anchor that made $420K feel like a deal when it was actually above market. If you'd started your analysis from comparable sales instead of the listing price, your negotiation target would have been very different.",
                        prompts: [
                            "What was the first number, estimate, or reference point you encountered in this situation?",
                            "Is your current thinking being pulled toward that initial anchor? Would you think differently if the anchor had been different?",
                            "What would your assessment be if you started from scratch with no prior reference point?",
                            "Can you find independent data points that aren't influenced by the original anchor?"
                        ],
                        warnings: [
                            "Knowing about anchoring doesn't make you immune - you need active countermeasures",
                            "Anchors work even when they're obviously random (studies show this repeatedly)",
                            "Your own initial estimate can anchor you too - be willing to revise dramatically"
                        ],
                        relatedModels: ["Availability Bias Recognition", "Base Rate Analysis", "Sensitivity Analysis"]
                    },
                    {
                        name: "Status Quo Bias Check",
                        description: "Are you favoring this just because it's the current state?",
                        explanation: "Status Quo Bias is our strong preference for the current state of affairs. We feel losses from change more than equivalent gains (loss aversion), and the current state feels safer simply because it's familiar. This means we systematically under-change - staying in jobs, relationships, strategies, and systems longer than we should. The question isn't 'is there a good reason to change?' but 'if I weren't already doing this, would I choose to start?'",
                        example: "A company has used the same CRM for 8 years. Everyone agrees it's inadequate, but switching feels enormous - data migration, retraining, disruption. They keep renewing. The status quo bias question: 'If we had no CRM today and were choosing for the first time, would we pick this one?' Obviously not. The switching costs are real but finite; the ongoing cost of an inadequate tool compounds forever.",
                        prompts: [
                            "If you were starting fresh today with no history, would you choose the current path?",
                            "What are you keeping simply because changing feels harder than staying?",
                            "What's the ongoing cost of the status quo that you've stopped noticing because it's familiar?",
                            "Separate the genuine switching costs (real) from the comfort of familiarity (bias). Are the costs really that high?"
                        ],
                        warnings: [
                            "Sometimes the status quo really is the best option - bias check doesn't mean 'always change'",
                            "Switching costs are real even when status quo bias is also real - account for both",
                            "Change for the sake of change is its own bias (novelty bias)"
                        ],
                        relatedModels: ["Sunk Cost Awareness", "Zero-Based Thinking", "Inversion"]
                    },
                    {
                        name: "Black Swan Awareness",
                        description: "What extreme, unlikely events could change everything?",
                        explanation: "Black Swan Awareness, from Nassim Taleb's work, means accounting for events that are extremely unlikely, have massive impact, and are only 'predictable' in hindsight. Standard risk analysis focuses on the probable - Black Swan thinking focuses on the possible. You can't predict specific Black Swans, but you can ask: how exposed am I to extreme events, and can I position myself to survive (or benefit from) them?",
                        example: "A supply chain optimized for efficiency has a single supplier for a critical component. Probability of that supplier failing: very low. Impact: catastrophic. COVID-19 was a Black Swan that exposed exactly this fragility across global supply chains. Companies that had maintained 'inefficient' backup suppliers - a hedge against unlikely events - survived while hyper-optimized competitors collapsed.",
                        prompts: [
                            "What extremely unlikely but high-impact events could blow up this plan?",
                            "How fragile is your plan to unexpected shocks? Where are the single points of failure?",
                            "What would you do if the worst-case scenario happened tomorrow? Do you have a response ready?",
                            "Can you structure this so you benefit from positive surprises while limiting exposure to negative ones?"
                        ],
                        warnings: [
                            "You can't predict specific Black Swans - focus on resilience and exposure, not prediction",
                            "Don't become paralyzed by unlikely scenarios - the goal is awareness and positioning, not fear",
                            "The biggest risk is often the one nobody in the room is talking about"
                        ],
                        relatedModels: ["Antifragility", "Redundancy", "Margin of Safety"]
                    },
                    {
                        name: "Tripwire / Kill Criteria",
                        description: "Define in advance when to stop or pivot",
                        explanation: "Tripwire planning means setting specific, measurable conditions IN ADVANCE that trigger a decision to stop, pivot, or escalate. Without tripwires, gradual deterioration goes unnoticed - the frog in slowly boiling water. When you define 'if X happens, we do Y' while you're thinking clearly, you protect your future self from denial, sunk cost fallacy, and the slow drift of standards. Tripwires turn vague unease into clear action.",
                        example: "A startup commits to a new product direction with these tripwires: 'If we don't have 100 paying users by month 6, we pivot. If burn rate exceeds $80K/month for two consecutive months, we cut scope. If either founder wants out, we have a serious conversation within one week.' Six months later, they have 40 users. Without the tripwire, they'd rationalize. With it, the decision to pivot was already made - they just had to execute.",
                        prompts: [
                            "What specific, measurable signals would tell you this isn't working?",
                            "At what point should you stop investing and cut losses? Define the number or date now.",
                            "What conditions would trigger a pivot vs. a full stop vs. doubling down?",
                            "Are you willing to commit NOW to honoring these tripwires, even if it's uncomfortable later?"
                        ],
                        warnings: [
                            "Tripwires only work if you actually honor them - pre-commit publicly if possible",
                            "Set them while you're thinking clearly, not when you're already invested and emotional",
                            "Too-sensitive tripwires cause premature quitting; too-insensitive ones are useless - calibrate carefully"
                        ],
                        relatedModels: ["Pre-mortem", "Sunk Cost Awareness", "Reversible vs. Irreversible Decisions"]
                    }
                ]
            },
            generative: {
                title: "Generative Models",
                purpose: "Create new possibilities and novel solutions",
                coreQuestion: "What options haven't I considered?",
                whenToUse: "When stuck with unsatisfactory options, when innovation is needed, when breaking into new markets or categories.",
                models: [
                    {
                        name: "First Principles (Generative)",
                        description: "Rebuild from scratch differently",
                        explanation: "First Principles thinking in its generative form asks: if we were starting from scratch with no legacy constraints, how would we build this? It's the creative counterpart to diagnostic First Principles. While the diagnostic version breaks down what exists, the generative version reimagines what could be. This is how breakthroughs happen - by refusing to accept inherited constraints that may no longer apply.",
                        example: "Traditional car companies asked: 'How do we make better gas stations?' Tesla asked: 'If we were starting from scratch, would we build gas stations at all?' The answer was home charging and superchargers strategically placed. They didn't improve the existing solution; they rebuilt the problem from first principles. The result was a fundamentally different (and better) fueling infrastructure.",
                        prompts: [
                            "If you were starting completely from scratch today, how would you design this?",
                            "What legacy constraints are you accepting that a new entrant wouldn't have?",
                            "What would a solution look like if you ignored 'how it's always been done'?",
                            "If this industry/problem didn't exist, and you were inventing it today, what would you build?"
                        ],
                        warnings: [
                            "Existing solutions often have good reasons - understand before discarding",
                            "From-scratch thinking ignores switching costs and adoption challenges",
                            "Revolutionary ideas need evolutionary implementation plans"
                        ],
                        relatedModels: ["First Principles", "Constraint Removal", "Reframing"]
                    },
                    {
                        name: "Lateral Thinking",
                        description: "Approach from different angle",
                        explanation: "Lateral thinking, coined by Edward de Bono, means approaching problems indirectly and creatively rather than through traditional step-by-step logic. While vertical thinking digs deeper in the same hole, lateral thinking digs a new hole in a different location. It involves deliberately moving sideways from the expected path to discover new approaches that wouldn't emerge from linear analysis.",
                        example: "A hospital struggled with slow elevators and patient complaints. The obvious solution: faster elevators (expensive, disruptive). The lateral solution: install mirrors on each floor. Patients stopped complaining - not because elevators were faster, but because they were distracted checking their appearance. The actual problem wasn't elevator speed; it was perceived wait time.",
                        prompts: [
                            "What if you approached this from a completely different direction?",
                            "What's an indirect path to the same goal? What would a non-expert try?",
                            "What assumptions are you making about HOW this must be solved?",
                            "What would you do if the obvious approach were impossible?"
                        ],
                        warnings: [
                            "Lateral thinking complements, not replaces, logical analysis",
                            "Not every problem needs a creative solution - sometimes the obvious answer is correct",
                            "Novelty isn't inherently valuable; the lateral solution must actually work"
                        ],
                        relatedModels: ["Reframing", "Constraint Removal", "Analogical Thinking"]
                    },
                    {
                        name: "Combinatorial Thinking",
                        description: "Merge X and Y for new combinations",
                        explanation: "Combinatorial thinking creates new ideas by combining existing elements in novel ways. Most innovations aren't created from nothing - they're new combinations of existing ideas, technologies, or concepts. The iPhone combined a phone, music player, and internet device. Uber combined GPS, smartphones, and ride services. The power comes from seeing connections others miss.",
                        example: "Netflix started as a combination: DVD rental (existing) + mail delivery (existing) + no late fees (existing concept, new application). Later, they combined streaming technology + original content production + data-driven recommendations. Each evolution was a new combination of existing elements. What existing elements in your domain could be combined differently?",
                        prompts: [
                            "What two existing things could you combine to create something new?",
                            "What works well in adjacent industries that you could adapt?",
                            "If you merged your solution with [random other concept], what would result?",
                            "What are the individual components here? What happens if you recombine them?"
                        ],
                        warnings: [
                            "Not all combinations are valuable - the combination must solve a real need",
                            "Combination complexity can create integration challenges",
                            "The best combinations often seem obvious in retrospect"
                        ],
                        relatedModels: ["Analogical Thinking", "First Principles (Generative)", "Blue Ocean Strategy"]
                    },
                    {
                        name: "Constraint Removal",
                        description: "Challenge assumed limitations",
                        explanation: "Constraint removal asks: what if a perceived limitation didn't exist? Many constraints we accept are assumptions, not laws of physics. By systematically questioning each constraint, we often discover that limits are self-imposed or outdated. Even constraints that can't be removed can often be worked around once you see them clearly. The first step to removing a constraint is recognizing you've accepted one.",
                        example: "For decades, the assumption was 'people won't pay for bottled water - it's free from the tap.' This constraint was an assumption, not a fact. By questioning it, entrepreneurs created a multi-billion dollar industry. The constraint 'people won't pay for X' is almost always worth challenging. What constraints are you accepting that might not be real?",
                        prompts: [
                            "What constraints are you assuming? List them all - budget, time, resources, rules, physics.",
                            "For each constraint: Is this truly fixed, or is it an assumption?",
                            "What would you do if [constraint X] didn't exist?",
                            "Which constraint, if removed, would change everything? Can you challenge it?"
                        ],
                        warnings: [
                            "Some constraints are real and important - don't ignore physics or ethics",
                            "Removing constraints often shifts problems rather than solving them",
                            "Social and organizational constraints may be harder to change than technical ones"
                        ],
                        relatedModels: ["First Principles (Generative)", "Reframing", "Lateral Thinking"]
                    },
                    {
                        name: "Analogical Thinking",
                        description: "Learn from different domains",
                        explanation: "Analogical thinking transfers solutions from one domain to another. Many breakthroughs come from asking 'How did they solve a similar problem in a completely different field?' Resistance to this is common - 'our industry is different' - but the underlying patterns often transfer. The key is finding the right level of abstraction where the analogy holds.",
                        example: "The designers of the Shinkansen bullet train faced a problem: sonic booms when exiting tunnels. An engineer who was also a birdwatcher noticed kingfishers dive into water without a splash. The kingfisher's beak shape was adapted for the train's nose, solving the sonic boom problem and improving efficiency by 15%. A solution from ornithology applied to engineering.",
                        prompts: [
                            "What's a similar problem that's been solved in a completely different field?",
                            "How would [different industry/discipline] approach this problem?",
                            "What's the abstract structure of this problem? Where else does that structure appear?",
                            "If a biologist/engineer/artist/economist looked at this, what would they see?"
                        ],
                        warnings: [
                            "Analogies can mislead - not all similarities are relevant",
                            "The analogy may transfer the solution but not the implementation details",
                            "'Our industry is different' is often wrong, but sometimes right"
                        ],
                        relatedModels: ["Combinatorial Thinking", "Lateral Thinking", "Reframing"]
                    },
                    {
                        name: "Reframing",
                        description: "Define the problem differently",
                        explanation: "Reframing changes how you define the problem itself. A different frame leads to different solutions. Most problem-solving assumes the problem is correctly defined, but often the definition is the problem. Einstein allegedly said, 'If I had an hour to solve a problem, I'd spend 55 minutes defining the problem and 5 minutes solving it.' The way you frame a problem determines which solutions are visible.",
                        example: "A dog food company struggled to increase market share. Original frame: 'How do we make dog food that dogs like more?' Reframe: 'How do we make dog food that dog OWNERS feel good about buying?' The problem wasn't canine preference - dogs will eat almost anything. The problem was owner guilt and identity. The reframe led to premium, 'healthy' dog food with human-grade ingredients.",
                        prompts: [
                            "How are you currently defining this problem? Write it down explicitly.",
                            "What are three other ways you could define the same situation?",
                            "Who else has a stake in this? How would they frame the problem?",
                            "What if the problem is actually [different than you assumed]?"
                        ],
                        warnings: [
                            "Reframing can be used to avoid hard truths - make sure the new frame is honest",
                            "Some problems are correctly framed; reframing isn't always necessary",
                            "Multiple frames can coexist; you don't have to choose just one"
                        ],
                        relatedModels: ["First Principles", "Lateral Thinking", "Constraint Removal"]
                    },
                    {
                        name: "Blue Ocean Strategy",
                        description: "Find uncontested market space",
                        explanation: "Blue Ocean Strategy, from the book by Kim and Mauborgne, contrasts 'red oceans' (existing markets with fierce competition, bloody with rivalry) with 'blue oceans' (new market spaces where competition is irrelevant). Instead of fighting over existing demand, blue ocean thinking creates new demand. It asks: how do we make the competition irrelevant by creating a new value proposition?",
                        example: "Cirque du Soleil didn't try to out-compete Ringling Brothers for circus customers. They created a blue ocean by combining circus arts with theater, targeting adults willing to pay premium prices for sophisticated entertainment. They eliminated costly elements (animals, star performers, multiple show arenas) and added new ones (artistic themes, refined environment, multiple productions). They didn't win the circus industry; they made it irrelevant.",
                        prompts: [
                            "What industry factors could you eliminate that the industry takes for granted?",
                            "What factors could you reduce well below the industry standard?",
                            "What factors could you raise well above the industry standard?",
                            "What factors could you create that the industry has never offered?"
                        ],
                        warnings: [
                            "Blue oceans don't stay blue forever - success attracts competition",
                            "Creating new markets is riskier than competing in known ones",
                            "Customers may not know they want something that doesn't exist yet"
                        ],
                        relatedModels: ["First Principles (Generative)", "Reframing", "Combinatorial Thinking"]
                    },
                    {
                        name: "Working Backwards",
                        description: "Start from the ideal outcome and reverse-engineer",
                        explanation: "Working Backwards means starting with a vivid picture of the desired end state and then reasoning backward step by step: what's the last thing that needs to happen before that? And before that? And before that? This is the opposite of forward planning (where you start from today and project forward). Working backwards often reveals paths, requirements, and intermediate steps that forward thinking misses because it gets trapped by current constraints.",
                        example: "Amazon famously writes the press release first - before building anything. For a new product, they start with the customer experience they want (the end state), write the announcement as if it already exists, then work backward to figure out what needs to be built. This ensures the end product actually delivers value rather than being a collection of features that seemed logical during development.",
                        prompts: [
                            "Describe the ideal end state in vivid detail. What does success look like when it's done?",
                            "What's the very last step before that end state is achieved?",
                            "Keep going backward: what comes before that? And before that? Map the chain.",
                            "At what point does the backward chain connect to where you are now? What's the first step?"
                        ],
                        warnings: [
                            "The ideal end state needs to be realistic enough to reverse-engineer from",
                            "Don't skip steps in the backward chain - gaps hide the hardest problems",
                            "Working backwards reveals the path, but you still walk it forwards - sequence matters"
                        ],
                        relatedModels: ["Critical Path", "Reframing", "First Principles (Generative)"]
                    },
                    {
                        name: "Scenario Planning",
                        description: "Map multiple plausible futures",
                        explanation: "Scenario Planning creates 3-4 distinct, plausible future states and asks: what would we do in each? Unlike prediction (picking the most likely future), scenario planning acknowledges uncertainty and prepares for multiple possibilities. The goal isn't to guess right, but to have thought through your response to various futures so you're never completely blindsided. The best strategies are robust across multiple scenarios, not optimized for just one.",
                        example: "A retailer planning their 2-year strategy creates four scenarios: (1) economy booms, consumers spend freely; (2) recession, consumers cut back; (3) competitor launches disruptive online platform; (4) supply chain disruption continues. For each, they map their response. They discover that investing in their own online platform is a strong move in scenarios 1, 3, AND 4 - making it robust. A new physical store only wins in scenario 1 - making it fragile.",
                        prompts: [
                            "What are 3-4 genuinely different but plausible futures for this situation?",
                            "For each scenario: what would you do? What would your response be?",
                            "Which actions or preparations are robust across multiple scenarios?",
                            "Which scenario are you unconsciously assuming is most likely? What if you're wrong?"
                        ],
                        warnings: [
                            "Scenarios should be genuinely different, not minor variations of the same future",
                            "Include at least one scenario that makes you uncomfortable - that's usually the most valuable",
                            "Don't use scenario planning to justify a decision you've already made by cherry-picking the right scenario"
                        ],
                        relatedModels: ["Black Swan Awareness", "Sensitivity Analysis", "Working Backwards"]
                    },
                    {
                        name: "Zero-Based Thinking",
                        description: "If you weren't already here, would you start?",
                        explanation: "Zero-Based Thinking asks: knowing what I now know, if I were not already in this situation, would I get into it? If the answer is no, your next question is: how do I get out, and how fast? This ruthlessly separates past decisions (which can't be changed) from present reality (which can). It's the antidote to sunk cost fallacy, status quo bias, and the gradual drift that keeps people in suboptimal situations long past their expiration date.",
                        example: "A manager has an underperforming employee they hired two years ago. They've invested heavily in coaching and support. Zero-based question: 'If this person applied for the job today, knowing what I know about their performance, would I hire them?' If the honest answer is no, then the question shifts from 'how do I salvage this?' to 'what's my transition plan?' The past investment is irrelevant to the current decision.",
                        prompts: [
                            "Knowing what you now know, would you make the same choice again today?",
                            "If the answer is no - what's your exit plan? What's keeping you in this situation?",
                            "What would a fresh start look like if you could design it from scratch?",
                            "What's the cost of staying in this situation for another year vs. the cost of changing now?"
                        ],
                        warnings: [
                            "Sometimes you WOULD start again - zero-based thinking isn't always about leaving",
                            "Exit costs are real and should be factored in, but don't confuse them with sunk costs",
                            "Applies to jobs, relationships, projects, strategies, subscriptions - anything with ongoing commitment"
                        ],
                        relatedModels: ["Sunk Cost Awareness", "Status Quo Bias Check", "Constraint Removal"]
                    },
                    {
                        name: "SCAMPER",
                        description: "Systematically modify what exists",
                        explanation: "SCAMPER is a structured creativity technique that generates alternatives by systematically applying seven transformations to what already exists: Substitute (replace a component), Combine (merge with something else), Adapt (borrow from another context), Modify (change size/shape/attributes), Put to other use (repurpose), Eliminate (remove components), Reverse (flip the order or roles). It's particularly powerful when 'brainstorming' feels too vague or when you're stuck iterating on the same ideas.",
                        example: "A struggling coffee shop applies SCAMPER. Substitute: replace tables with standing desks (attracts remote workers). Combine: add a bookshop section. Adapt: copy the 'speakeasy' model with a hidden entrance. Modify: make it tiny (6 seats, hyper-premium). Put to other use: rent the space as event venue after hours. Eliminate: remove the menu - one perfect coffee, no choices. Reverse: customers set prices. Each generates a genuinely different concept.",
                        prompts: [
                            "SUBSTITUTE: What component could you replace with something different?",
                            "COMBINE: What could you merge this with to create something new?",
                            "ADAPT / MODIFY: What could you borrow from another domain, or change in scale/form?",
                            "ELIMINATE / REVERSE: What could you remove entirely, or what order/role could you flip?"
                        ],
                        warnings: [
                            "Not every SCAMPER output will be good - the point is volume and variety, then filtering",
                            "Works best on concrete things (products, processes, services) rather than abstract problems",
                            "Combine SCAMPER with evaluation - creativity without judgment leads nowhere"
                        ],
                        relatedModels: ["Combinatorial Thinking", "Constraint Removal", "Lateral Thinking"]
                    },
                    {
                        name: "Worst Possible Idea",
                        description: "Brainstorm terrible ideas, then invert them",
                        explanation: "The Worst Possible Idea technique flips brainstorming on its head: instead of trying to generate good ideas (which creates pressure and self-censorship), you deliberately generate the worst, most ridiculous ideas you can think of. This is psychologically freeing - there's no judgment, and terrible ideas flow easily. Then you examine each bad idea: why is it bad? What would the opposite look like? Often, inverting a terrible idea produces a surprisingly creative good one.",
                        example: "Designing a better hospital waiting room. Worst ideas: make it dark and scary, play annoying music, have no chairs, show patients' wait times counting UP. Inverting: the 'counting up' idea inverts to a real-time display showing estimated wait and queue position - which actually addresses patients' top complaint (uncertainty). The terrible idea contained the seed of a genuinely innovative solution.",
                        prompts: [
                            "What are the absolute worst approaches to this situation? Be creative - go absurd.",
                            "For each bad idea: WHY specifically is it bad? What makes it terrible?",
                            "Now invert each bad idea. What's the opposite? Does any inversion spark something interesting?",
                            "What assumptions did your worst ideas violate? Should those assumptions actually be violated?"
                        ],
                        warnings: [
                            "The inversion step is critical - don't stop at just generating bad ideas",
                            "Some 'worst' ideas are only bad in conventional thinking and might actually be innovative",
                            "This works best in groups where people feed off each other's absurdity"
                        ],
                        relatedModels: ["Inversion", "Lateral Thinking", "Reframing"]
                    },
                    {
                        name: "Reverse Engineering",
                        description: "Find what works and figure out how they did it",
                        explanation: "Reverse Engineering means finding an existing success - a product, a solution, a company, a person who solved a similar problem - and working backward to understand HOW they achieved it. Instead of inventing from scratch, you learn from what already works. This isn't copying; it's understanding the principles and mechanisms behind success, which you can then adapt to your own context. It's how most innovation actually happens.",
                        example: "A SaaS startup struggling with churn studies Slack's onboarding. They don't copy the UI - they reverse-engineer the principles: immediate value delivery (first message sent in under 2 minutes), progressive disclosure (features revealed as needed), social proof (showing team activity), and low commitment (free tier with generous limits). They apply these same principles to their own very different product, and churn drops 30%.",
                        prompts: [
                            "Who has already solved a problem similar to yours? What did they do?",
                            "Don't just look at WHAT they did - WHY did it work? What are the underlying principles?",
                            "What aspects of their solution could be adapted to your specific context?",
                            "What advantages or constraints do you have that they didn't? How does that change the approach?"
                        ],
                        warnings: [
                            "Context matters enormously - what worked for them may not work for you in different conditions",
                            "Don't confuse correlation with causation: they might have succeeded despite their strategy, not because of it",
                            "Reverse engineering the visible parts misses the invisible advantages (network effects, timing, luck)"
                        ],
                        relatedModels: ["Analogical Thinking", "First Principles (Generative)", "Working Backwards"]
                    },
                    {
                        name: "Second-Order Opportunities",
                        description: "What new possibilities does this open up?",
                        explanation: "Second-Order Opportunities looks beyond the immediate outcome of a decision to ask: what new possibilities does this create? Every action changes the landscape - opening doors that didn't exist before. Most people evaluate a decision only on its direct merits, but the indirect opportunities it creates (or forecloses) can be far more valuable. The best strategic decisions are ones where even the 'side effects' are valuable.",
                        example: "A developer decides to open-source a tool they built internally. First-order outcome: they get some community contributions. Second-order opportunities: they become known as an expert in this space, receive speaking invitations, attract hiring interest from top companies, and potential customers discover their consulting services through the project. The decision to open-source was good on its own merits, but the second-order opportunities dwarfed the first-order benefit.",
                        prompts: [
                            "If you take this path, what new options, connections, or capabilities does it open up?",
                            "What doors does this close? Are the doors it opens more valuable than the ones it closes?",
                            "What could you do AFTER this that you couldn't do before? What's the next move it enables?",
                            "Which option creates the most future optionality, regardless of the immediate outcome?"
                        ],
                        warnings: [
                            "Don't justify a bad first-order decision with hypothetical second-order benefits",
                            "Second-order opportunities are uncertain - don't overvalue them relative to concrete first-order outcomes",
                            "The best second-order opportunities often aren't predictable - position for luck rather than planning for it"
                        ],
                        relatedModels: ["Second-Order Thinking", "Scenario Planning", "Blue Ocean Strategy"]
                    }
                ]
            },
            implementation: {
                title: "Implementation Models",
                purpose: "Move from decision to effective action",
                coreQuestion: "How do I actually execute this?",
                whenToUse: "After deciding what to do, when planning execution, when building sustainable practices.",
                models: [
                    {
                        name: "Minimum Viable Product (MVP)",
                        description: "Smallest testable version",
                        explanation: "An MVP is the smallest version of your idea that lets you learn whether you're on the right track. It's not about building something minimal and bad - it's about finding the fastest path to validated learning. The goal isn't to ship; it's to learn. What's the smallest thing you can build to test your most critical assumption? Build that, learn, then iterate.",
                        example: "Dropbox's MVP wasn't a working product - it was a 3-minute video demonstrating how the product would work. This tested the critical assumption: 'Do people want simple file syncing?' The video went viral, proving demand before a single line of code was written. The MVP matched the learning need, not the eventual product vision.",
                        prompts: [
                            "What's the riskiest assumption in your plan? How could you test it quickly?",
                            "What's the smallest version that would teach you something valuable?",
                            "What can you remove from the plan and still learn what you need?",
                            "If you only had one week, what would you build to validate the core idea?"
                        ],
                        warnings: [
                            "MVP doesn't mean 'crappy first version' - it should still deliver value",
                            "Some things (safety-critical, trust-dependent) can't be MVP'd",
                            "Learning requires actually launching and getting real feedback, not just building"
                        ],
                        relatedModels: ["Feedback Loops", "Reversible vs. Irreversible Decisions", "80/20 Action"]
                    },
                    {
                        name: "Feedback Loops",
                        description: "Track if this is working",
                        explanation: "Feedback loops are systems where outputs cycle back as inputs, allowing for adjustment and improvement. Fast, accurate feedback is essential for learning and course-correction. Without feedback, you can't know if you're succeeding or failing. The key questions are: What signals tell me this is working? How quickly do I get them? How reliable are they?",
                        example: "A sales team implementing a new script needs feedback loops. Lagging indicator: quarterly revenue (too slow). Leading indicators: call-to-meeting conversion rate (weekly), meeting-to-close rate (weekly), customer satisfaction scores (monthly). By tracking leading indicators, they can adjust the script before quarterly results reveal problems.",
                        prompts: [
                            "How will you know if this is working? What specific metrics or signals?",
                            "How quickly will you get feedback? Can you shorten that cycle?",
                            "What's the difference between leading indicators (early signals) and lagging indicators (final results)?",
                            "What feedback mechanisms need to be built into this plan?"
                        ],
                        warnings: [
                            "Measuring the wrong thing creates bad feedback loops - choose metrics carefully",
                            "Feedback can be gamed; look at multiple signals",
                            "Too much feedback can cause overreaction; not every signal needs a response"
                        ],
                        relatedModels: ["Minimum Viable Product (MVP)", "Systems Thinking", "Compound Interest"]
                    },
                    {
                        name: "Compound Interest",
                        description: "Small actions, exponential results",
                        explanation: "Compound interest isn't just financial - it's a universal principle. Small, consistent actions compound over time into exponential results. The effects are non-linear: 1% improvement daily = 37x improvement annually. The key insight is that early results feel insignificantly small, but the back end of compounding is dramatic. Patience and consistency are required to reach the hockey stick.",
                        example: "Writing for 30 minutes daily seems trivial. Day 1: 500 words. Day 30: 15,000 words. Day 365: 180,000 words - two full books. Plus, your writing skill improves, making each session more productive. The compounding isn't just in output but in capability. Most people overestimate what they can do in a day and underestimate what they can do in a year.",
                        prompts: [
                            "What small action, repeated consistently, would compound over time?",
                            "Where are you expecting immediate results when compounding requires patience?",
                            "What skills, relationships, or assets could you build that grow exponentially?",
                            "What's the 1% improvement you could make today that compounds?"
                        ],
                        warnings: [
                            "Compounding requires consistency - interrupted compound growth resets to zero",
                            "Negative behaviors compound too - bad habits, debt, toxic relationships",
                            "Early compounding feels like nothing is happening; don't give up"
                        ],
                        relatedModels: ["Habit Stacking", "Leverage", "Feedback Loops"]
                    },
                    {
                        name: "Leverage",
                        description: "Small effort, big impact",
                        explanation: "Leverage is getting more output per unit of input. Archimedes said, 'Give me a lever long enough and I shall move the world.' Leverage comes in many forms: tools that multiply effort, skills that command premium value, systems that work while you sleep, relationships that open doors. The highest performers don't work hardest - they find the highest-leverage activities and focus there.",
                        example: "A consultant can trade time for money (low leverage) or create a course that sells while they sleep (high leverage). The course requires the same expertise but scales infinitely. Other leverage: hiring (multiply through others), code (multiply through software), media (multiply through audience), capital (multiply through investment).",
                        prompts: [
                            "Where could you get 10x results from the same effort? What's the leverage point?",
                            "What tools, systems, or relationships could multiply your effectiveness?",
                            "Are you doing high-leverage work, or are you busy with low-leverage tasks?",
                            "What's the one activity where your effort would have disproportionate impact?"
                        ],
                        warnings: [
                            "Leverage amplifies both good and bad decisions - be sure you're right",
                            "High-leverage positions often require building skills or assets first",
                            "Not everything can or should be leveraged - some things require direct effort"
                        ],
                        relatedModels: ["Pareto Principle (80/20)", "80/20 Action", "Compound Interest"]
                    },
                    {
                        name: "Critical Path",
                        description: "Sequence and dependencies",
                        explanation: "The critical path is the longest sequence of dependent tasks that determines the minimum project duration. Tasks on the critical path have zero slack - if any of them slip, the whole project slips. Understanding the critical path reveals where to focus attention, what can be done in parallel, and where delays are fatal. Not all tasks are equal; critical path tasks deserve disproportionate attention.",
                        example: "Building a house: you can't install electrical until walls are up; can't paint until electrical is done; can't move in until paint dries. This is the critical path. Meanwhile, landscaping can happen in parallel - it's not on the critical path. A delay in landscaping doesn't delay move-in; a delay in electrical delays everything downstream.",
                        prompts: [
                            "What tasks must be completed before others can start? Map the dependencies.",
                            "What's the longest chain of dependent tasks? That's your critical path.",
                            "What can be done in parallel while waiting for critical path tasks?",
                            "Where are the bottlenecks? What would happen if they were delayed?"
                        ],
                        warnings: [
                            "The critical path can change as the project evolves - reassess regularly",
                            "Near-critical paths can become critical if they slip",
                            "Dependencies aren't always obvious - hidden dependencies cause surprises"
                        ],
                        relatedModels: ["Redundancy", "Feedback Loops", "80/20 Action"]
                    },
                    {
                        name: "80/20 Action",
                        description: "Focus on highest-impact actions",
                        explanation: "80/20 Action applies the Pareto Principle to execution: identify and focus ruthlessly on the 20% of actions that will drive 80% of results. Most people spread effort evenly across tasks, but impact is not evenly distributed. The discipline is saying no to the merely good so you can say yes to the truly important. Ruthless prioritization beats scattered effort.",
                        example: "A startup founder's to-do list has 50 items. 80/20 analysis reveals: 10 items relate to closing the next big customer (potential: company survival). 40 items are 'nice to have' operational improvements. Focus intensely on the 10 items. The 40 can wait or be delegated. The founder who does everything does nothing important.",
                        prompts: [
                            "Of all the things you could do, which few will drive most of the results?",
                            "What's on your list that feels productive but doesn't actually move the needle?",
                            "If you could only accomplish 3 things this week, which would matter most?",
                            "What would you stop doing if you were forced to cut half your activities?"
                        ],
                        warnings: [
                            "The vital few change over time; what was 80/20 yesterday may not be today",
                            "Some foundational work doesn't show immediate results but enables later 80/20",
                            "Extreme focus can cause you to miss important but non-obvious opportunities"
                        ],
                        relatedModels: ["Pareto Principle (80/20)", "Leverage", "Critical Path"]
                    },
                    {
                        name: "Habit Stacking",
                        description: "Link to established routines",
                        explanation: "Habit stacking links new behaviors to existing habits, using established routines as triggers for new ones. The formula: 'After I [existing habit], I will [new habit].' This works because existing habits are already wired into your brain's autopilot. By attaching new behaviors to existing ones, you borrow the existing habit's triggering power. The chain of habits becomes a single automatic routine.",
                        example: "Goal: daily journaling. Existing habit: morning coffee. Stack: 'After I pour my morning coffee, I will write in my journal for 5 minutes.' The coffee triggers the journaling automatically. Over time, the stack becomes: coffee → journal → review calendar → start top priority task. One anchor habit can trigger an entire morning routine.",
                        prompts: [
                            "What habits do you already do reliably every day? List them.",
                            "What new behavior do you want to establish?",
                            "After which existing habit could you naturally insert the new behavior?",
                            "What's the smallest version of the new habit you could stack? (Start tiny)"
                        ],
                        warnings: [
                            "The trigger habit must be reliable - don't stack on inconsistent behaviors",
                            "Start with tiny habits; don't stack ambitious behaviors onto existing routines",
                            "If the stack breaks, rebuild from the most reliable anchor habit"
                        ],
                        relatedModels: ["Compound Interest", "Feedback Loops", "Minimum Viable Product (MVP)"]
                    },
                    {
                        name: "Pilot Testing",
                        description: "Run a small-scale trial before full commitment",
                        explanation: "Pilot Testing means running a small, bounded experiment before committing to a full-scale implementation. Unlike MVP (which is about product), pilot testing applies to any decision - new processes, policies, hires, strategies, lifestyle changes. The key is designing the pilot to actually test your critical assumptions: defining what success looks like, how long to run it, and what you'll measure. A pilot turns a leap of faith into a calculated experiment.",
                        example: "A company wants to switch to a 4-day work week. Instead of company-wide change, they pilot it with two teams for 3 months. Success criteria: productivity doesn't drop >5%, employee satisfaction increases, no client complaints. After the pilot, one team thrived (creative work benefited from focus days) and one struggled (client-facing work needed 5-day availability). The pilot revealed nuance that an all-or-nothing rollout would have missed.",
                        prompts: [
                            "Can you test this at a smaller scale first? What would a pilot look like?",
                            "What specifically would the pilot need to demonstrate for you to proceed with full commitment?",
                            "How long does the pilot need to run to give you meaningful data?",
                            "What's the smallest, cheapest version of this you could test to learn the most?"
                        ],
                        warnings: [
                            "Pilots need to be representative - a test in ideal conditions doesn't prove it works in real conditions",
                            "Define success criteria BEFORE the pilot, not after (to avoid moving the goalposts)",
                            "Some things fundamentally can't be piloted at small scale - network effects, for example"
                        ],
                        relatedModels: ["Minimum Viable Product (MVP)", "Feedback Loops", "Tripwire / Kill Criteria"]
                    },
                    {
                        name: "If-Then Planning",
                        description: "Pre-commit to specific triggers and actions",
                        explanation: "If-Then Planning (also called Implementation Intentions) means pre-deciding: 'When situation X occurs, I will do Y.' Research shows this simple technique dramatically increases follow-through because it removes in-the-moment decision-making. Instead of relying on willpower or remembering to act, you create an automatic link between a trigger and a response. It works for individual habits, team processes, and organizational responses.",
                        example: "Instead of 'I'll exercise more,' an If-Then plan: 'When I finish my morning coffee, I put on running shoes and go for a 20-minute run.' Instead of a vague escalation policy, a team defines: 'If a customer issue is unresolved after 4 hours, it automatically escalates to the team lead.' The specificity of the trigger-action pair eliminates ambiguity and the option to defer.",
                        prompts: [
                            "What are the key moments where action is needed? Define the specific triggers.",
                            "For each trigger, what's the specific action? Write it as 'When [trigger], I will [action].'",
                            "What obstacles or temptations might arise? Create If-Then plans for those too.",
                            "How will you make the trigger obvious and the action easy?"
                        ],
                        warnings: [
                            "If-Then plans work best for clearly defined situations - not for ambiguous, complex responses",
                            "Too many If-Then rules become a rigid system - keep them for the critical few behaviors",
                            "The action needs to be specific and concrete, not vague ('I will think about it' doesn't work)"
                        ],
                        relatedModels: ["Habit Stacking", "Tripwire / Kill Criteria", "Feedback Loops"]
                    },
                    {
                        name: "Staged Rollout",
                        description: "Implement in phases with go/no-go gates",
                        explanation: "Staged Rollout breaks implementation into distinct phases, each with defined deliverables and a decision point: continue, adjust, or stop. This is different from a plan with milestones - the key difference is the explicit go/no-go gate between stages. Each gate requires honest assessment against criteria defined at the start. Staged rollouts limit exposure, allow course correction, and prevent the common failure mode of 'we've come this far, we can't stop now.'",
                        example: "Rolling out a new performance review system. Stage 1: Design and pilot with one team (4 weeks). Gate: team feedback is positive, managers report it takes <30 mins per review. Stage 2: Expand to one department (8 weeks). Gate: participation >90%, no increase in HR complaints. Stage 3: Company-wide. Each gate is a genuine decision point - the rollout can be paused, modified, or reversed at any stage.",
                        prompts: [
                            "What are the natural stages of this implementation? What's the logical sequence?",
                            "What criteria must be met at each stage before proceeding to the next?",
                            "Who decides go/no-go at each gate? What data do they need?",
                            "What's your rollback plan if a stage fails? Can you reverse each stage independently?"
                        ],
                        warnings: [
                            "Go/no-go gates only work if someone has the authority and willingness to say 'no-go'",
                            "Staged rollouts take longer than all-at-once - ensure the timeline works for your constraints",
                            "Each stage should be genuinely independent enough to assess on its own merits"
                        ],
                        relatedModels: ["Pilot Testing", "Tripwire / Kill Criteria", "Critical Path"]
                    },
                    {
                        name: "Timeboxing / Parkinson's Law",
                        description: "Set tight, deliberate deadlines",
                        explanation: "Parkinson's Law states that work expands to fill the time available for its completion. Give yourself a week, and it takes a week. Give yourself a day, and - surprisingly often - it takes a day. Timeboxing harnesses this by setting deliberately tight time boundaries. This forces prioritization, prevents perfectionism, and creates urgency that sharpens focus. The constraint of limited time is often more productive than the luxury of ample time.",
                        example: "A team is given 2 weeks to research a market opportunity. After 2 weeks, they ask for 2 more 'to be thorough.' Parkinson's Law in action - the research expanded to fill the time. Alternative: timebox to 3 days. They focus on the 4-5 most critical questions, get 80% of the insight in 20% of the time, and make a faster decision. The 'missing' 20% of insight almost never changes the conclusion.",
                        prompts: [
                            "How long do you think this should take? Now cut that in half - what would you drop?",
                            "What's the minimum time needed to get to a 'good enough' result?",
                            "Are you spending time on perfection when 'done' would be more valuable?",
                            "What specific deliverable will you have at the end of your timebox?"
                        ],
                        warnings: [
                            "Timeboxing isn't about rushing - it's about focusing. Quality matters within the timebox.",
                            "Some things genuinely can't be compressed (curing concrete, building relationships, healing)",
                            "Chronic under-estimation is a separate problem - be honest about actual effort required"
                        ],
                        relatedModels: ["Pareto Principle (80/20)", "80/20 Action", "Satisficing vs. Optimizing"]
                    },
                    {
                        name: "After-Action Review",
                        description: "Structured learning from what just happened",
                        explanation: "An After-Action Review (AAR) asks four questions immediately after an action or decision plays out: What did we expect to happen? What actually happened? Why was there a difference? What will we do differently next time? Developed by the US Army, AARs are the most effective organizational learning tool known. They work because they're structured, blameless, and focused on the gap between expectation and reality - which is where all learning lives.",
                        example: "A product launch hit 60% of its sales target. AAR: Expected 10K units in month one. Actually sold 6K. Why the gap? Marketing reached the right audience (email open rates were high) but the landing page had a 2% conversion rate vs. the 5% benchmark - indicating a messaging problem, not a reach problem. Next time: A/B test landing pages before launch and set conversion rate tripwires.",
                        prompts: [
                            "What did you expect to happen? Be specific about your predictions.",
                            "What actually happened? Stick to facts and observations, not interpretations.",
                            "Why was there a gap between expectation and reality? What caused the difference?",
                            "What will you do differently next time? Be specific about the change."
                        ],
                        warnings: [
                            "AARs must be blameless to be honest - focus on systems and processes, not individuals",
                            "Do the AAR quickly, while memory is fresh - waiting reduces accuracy and honesty",
                            "The 'what will we do differently' must be specific and actionable, not vague 'try harder'"
                        ],
                        relatedModels: ["Feedback Loops", "Pilot Testing", "Root Cause Analysis"]
                    },
                    {
                        name: "Communication Planning",
                        description: "Who needs to know what, when, and how?",
                        explanation: "Communication Planning addresses the most common failure mode in implementation: not the plan itself, but how it's communicated. Who needs to know? What do they need to know? When do they need to know it? What's the right channel? What questions will they have? Most failed implementations were technically sound but poorly communicated - creating confusion, resistance, and misalignment. The implementation plan and the communication plan are equally important.",
                        example: "A company restructures two teams. The plan is solid, but communication is an afterthought: affected employees hear rumors before the official announcement, managers aren't briefed on how to answer questions, and partner teams learn about it from Slack gossip. Trust erodes. Contrast with planned communication: managers briefed Monday, affected teams told Tuesday in person with Q&A, broader org notified Wednesday via email with FAQ. Same restructuring, completely different experience.",
                        prompts: [
                            "Who are the different audiences for this decision? What does each group need to know?",
                            "What's the right sequence? Who should hear first, and why?",
                            "What questions will people have? Prepare answers before they ask.",
                            "What's the right channel for each audience? (Some things require face-to-face, not email.)"
                        ],
                        warnings: [
                            "Under-communication is almost always the failure mode - when in doubt, communicate more",
                            "People need to hear things multiple times in multiple ways before it lands",
                            "The absence of communication IS a communication - it says 'you don't matter enough to inform'"
                        ],
                        relatedModels: ["Stakeholder Mapping", "Staged Rollout", "Perspective-Taking"]
                    }
                ]
            }
        };

        // Decision Trees for Yes/No Model Selection
        // Each node is either: { q: "question", yes: node, no: node } or { model: "Model Name" }
        const decisionTrees = {
            decision: {
                diagnostic: {
                    q: "Does this decision involve multiple people or groups with competing interests?",
                    yes: {
                        q: "Are you clear on who all the stakeholders are and what they want?",
                        yes: { model: "Perspective-Taking" },
                        no: { model: "Stakeholder Mapping" }
                    },
                    no: {
                        q: "Do you feel confident you deeply understand the domain this decision is in?",
                        yes: {
                            q: "Is the situation complex with many interconnected moving parts?",
                            yes: { model: "Systems Thinking" },
                            no: {
                                q: "Have you clearly defined what you're actually deciding?",
                                yes: { model: "SWOT Analysis" },
                                no: { model: "Problem Definition" }
                            }
                        },
                        no: {
                            q: "Are you worried your existing beliefs might be biasing your understanding?",
                            yes: { model: "Confirmation Bias Recognition" },
                            no: {
                                q: "Are you making assumptions based on success stories you've seen or heard about?",
                                yes: { model: "Survivorship Bias Recognition" },
                                no: { model: "Circle of Competence" }
                            }
                        }
                    }
                },
                evaluative: {
                    q: "Is this primarily about choosing between specific options you've already identified?",
                    yes: {
                        q: "Do you have more than two options to compare?",
                        yes: { model: "Weighted Scoring / Decision Matrix" },
                        no: {
                            q: "Is this a high-stakes, potentially life-changing decision?",
                            yes: { model: "Regret Minimization" },
                            no: {
                                q: "Are there significant hidden costs or trade-offs you might be missing?",
                                yes: { model: "Opportunity Cost" },
                                no: { model: "Cost-Benefit Analysis" }
                            }
                        }
                    },
                    no: {
                        q: "Are you struggling with whether to keep investing in something you've already started?",
                        yes: { model: "Sunk Cost Awareness" },
                        no: {
                            q: "Are you torn between what's best now vs. what's best long-term?",
                            yes: { model: "Short-term vs Long-term Tradeoffs" },
                            no: {
                                q: "Does this decision involve uncertain outcomes with varying probabilities?",
                                yes: { model: "Expected Value" },
                                no: {
                                    q: "Are you overthinking this - trying to find the perfect answer when good enough would work?",
                                    yes: { model: "Satisficing vs. Optimizing" },
                                    no: { model: "Second-Order Thinking" }
                                }
                            }
                        }
                    }
                },
                protective: {
                    q: "Is this decision difficult or impossible to reverse once made?",
                    yes: {
                        q: "Have you imagined this going wrong in specific, concrete ways?",
                        yes: {
                            q: "Are you confident your reasoning is solid, or might you be rationalizing?",
                            yes: { model: "Black Swan Awareness" },
                            no: { model: "Devil's Advocate" }
                        },
                        no: { model: "Pre-mortem" }
                    },
                    no: {
                        q: "Are you choosing this mostly because it's what you're already doing?",
                        yes: { model: "Status Quo Bias Check" },
                        no: {
                            q: "Is a specific number, price, or estimate anchoring your thinking?",
                            yes: { model: "Anchoring Bias Check" },
                            no: {
                                q: "Do you need to build in safeguards or buffer for uncertainty?",
                                yes: { model: "Margin of Safety" },
                                no: {
                                    q: "Would it help to define clear conditions for when to change course?",
                                    yes: { model: "Tripwire / Kill Criteria" },
                                    no: { model: "Inversion" }
                                }
                            }
                        }
                    }
                },
                generative: {
                    q: "Do you feel stuck with the options you currently see?",
                    yes: {
                        q: "Is the problem that your current options all feel inadequate?",
                        yes: {
                            q: "Have you questioned whether the constraints limiting your options are real?",
                            yes: { model: "Zero-Based Thinking" },
                            no: { model: "Constraint Removal" }
                        },
                        no: {
                            q: "Would it help to look at how others have solved similar challenges?",
                            yes: { model: "Reverse Engineering" },
                            no: { model: "Reframing" }
                        }
                    },
                    no: {
                        q: "Are you looking for a bold, innovative direction rather than an incremental one?",
                        yes: {
                            q: "Is there an opportunity to create something entirely new rather than competing in existing space?",
                            yes: { model: "Blue Ocean Strategy" },
                            no: { model: "First Principles (Generative)" }
                        },
                        no: {
                            q: "Would it help to plan for multiple possible futures?",
                            yes: { model: "Scenario Planning" },
                            no: {
                                q: "Do you have a clear end state in mind and need to figure out the path?",
                                yes: { model: "Working Backwards" },
                                no: { model: "Second-Order Opportunities" }
                            }
                        }
                    }
                },
                implementation: {
                    q: "Can you test this decision at a small scale before fully committing?",
                    yes: {
                        q: "Do you already have a way to measure whether the test is working?",
                        yes: { model: "Pilot Testing" },
                        no: { model: "Feedback Loops" }
                    },
                    no: {
                        q: "Does this implementation involve multiple stages or phases?",
                        yes: {
                            q: "Is the sequencing and dependency between steps the main challenge?",
                            yes: { model: "Critical Path" },
                            no: { model: "Staged Rollout" }
                        },
                        no: {
                            q: "Are other people affected by this decision who need to be brought along?",
                            yes: { model: "Communication Planning" },
                            no: {
                                q: "Are you struggling with follow-through or maintaining momentum?",
                                yes: { model: "If-Then Planning" },
                                no: {
                                    q: "Are you trying to do too much at once?",
                                    yes: { model: "80/20 Action" },
                                    no: { model: "Leverage" }
                                }
                            }
                        }
                    }
                }
            },
            problem: {
                diagnostic: {
                    q: "Do you know what the problem is, or are you still figuring that out?",
                    yes: {
                        q: "Is this a complex problem with many interacting parts?",
                        yes: {
                            q: "Do you understand the connections and feedback loops between the parts?",
                            yes: { model: "Root Cause Analysis" },
                            no: { model: "Systems Thinking" }
                        },
                        no: {
                            q: "Are there multiple competing theories about what's causing this?",
                            yes: { model: "Occam's Razor" },
                            no: {
                                q: "Do you suspect you might be treating symptoms rather than the underlying cause?",
                                yes: { model: "Root Cause Analysis" },
                                no: { model: "First Principles" }
                            }
                        }
                    },
                    no: {
                        q: "Is your understanding of this problem based mainly on recent events or vivid examples?",
                        yes: { model: "Availability Bias Recognition" },
                        no: {
                            q: "Are you operating in an area outside your core expertise?",
                            yes: { model: "Circle of Competence" },
                            no: {
                                q: "Do you have data on how often this type of problem resolves successfully?",
                                yes: { model: "Base Rate Analysis" },
                                no: { model: "Problem Definition" }
                            }
                        }
                    }
                },
                evaluative: {
                    q: "Are you evaluating different possible solutions to the problem?",
                    yes: {
                        q: "Do you need a structured way to compare multiple solutions against criteria?",
                        yes: { model: "Weighted Scoring / Decision Matrix" },
                        no: {
                            q: "Are there significant costs involved that need to be justified?",
                            yes: { model: "Cost-Benefit Analysis" },
                            no: {
                                q: "Is the outcome uncertain - could the solution fail?",
                                yes: { model: "Expected Value" },
                                no: { model: "Pareto Principle (80/20)" }
                            }
                        }
                    },
                    no: {
                        q: "Are you trying to understand why the problem exists - what's driving it?",
                        yes: { model: "Incentives" },
                        no: {
                            q: "Is there tension between fixing this quickly vs. fixing it properly?",
                            yes: { model: "Short-term vs Long-term Tradeoffs" },
                            no: {
                                q: "Are you worried about unintended consequences of the fix?",
                                yes: { model: "Second-Order Thinking" },
                                no: {
                                    q: "Are your key assumptions about this problem reliable?",
                                    yes: { model: "Eisenhower Matrix" },
                                    no: { model: "Sensitivity Analysis" }
                                }
                            }
                        }
                    }
                },
                protective: {
                    q: "Is the proposed solution risky or high-stakes?",
                    yes: {
                        q: "Could the fix itself cause new problems?",
                        yes: {
                            q: "Have you stress-tested the solution by imagining it failing?",
                            yes: { model: "Devil's Advocate" },
                            no: { model: "Pre-mortem" }
                        },
                        no: {
                            q: "Is there a chance of rare but catastrophic failure?",
                            yes: { model: "Black Swan Awareness" },
                            no: { model: "Margin of Safety" }
                        }
                    },
                    no: {
                        q: "Are you sticking with the current approach mainly because it's familiar?",
                        yes: { model: "Status Quo Bias Check" },
                        no: {
                            q: "Can this solution be easily reversed if it doesn't work?",
                            yes: { model: "Reversible vs. Irreversible Decisions" },
                            no: {
                                q: "Do you need single-point-of-failure protection?",
                                yes: { model: "Redundancy" },
                                no: {
                                    q: "Would it help to define clear criteria for when to abandon this approach?",
                                    yes: { model: "Tripwire / Kill Criteria" },
                                    no: { model: "Antifragility" }
                                }
                            }
                        }
                    }
                },
                generative: {
                    q: "Have the obvious solutions already been tried or considered?",
                    yes: {
                        q: "Is the problem that your solutions keep addressing symptoms, not the root issue?",
                        yes: {
                            q: "Would it help to question whether the problem itself is correctly framed?",
                            yes: { model: "Reframing" },
                            no: { model: "First Principles (Generative)" }
                        },
                        no: {
                            q: "Could the solution come from combining existing elements in a new way?",
                            yes: { model: "Combinatorial Thinking" },
                            no: {
                                q: "Has a similar problem been solved in a completely different field?",
                                yes: { model: "Analogical Thinking" },
                                no: { model: "Lateral Thinking" }
                            }
                        }
                    },
                    no: {
                        q: "Are assumed constraints limiting your solution space?",
                        yes: { model: "Constraint Removal" },
                        no: {
                            q: "Would it help to systematically modify what already exists?",
                            yes: { model: "SCAMPER" },
                            no: {
                                q: "Do you have a clear picture of the solved state to work backwards from?",
                                yes: { model: "Working Backwards" },
                                no: { model: "Worst Possible Idea" }
                            }
                        }
                    }
                },
                implementation: {
                    q: "Is this a fix you can test before rolling out fully?",
                    yes: {
                        q: "Do you need to validate that the fix actually addresses the root cause?",
                        yes: { model: "Pilot Testing" },
                        no: { model: "Minimum Viable Product (MVP)" }
                    },
                    no: {
                        q: "Is this a complex fix involving multiple steps or teams?",
                        yes: {
                            q: "Is the main challenge coordinating the sequence of changes?",
                            yes: { model: "Critical Path" },
                            no: {
                                q: "Do others need to be informed or onboarded as part of the fix?",
                                yes: { model: "Communication Planning" },
                                no: { model: "Staged Rollout" }
                            }
                        },
                        no: {
                            q: "Is this a recurring problem that needs a lasting behavioral change?",
                            yes: {
                                q: "Can you link the new behavior to an existing routine?",
                                yes: { model: "Habit Stacking" },
                                no: { model: "If-Then Planning" }
                            },
                            no: {
                                q: "Do you need to build in monitoring to know if the fix is working?",
                                yes: { model: "Feedback Loops" },
                                no: { model: "After-Action Review" }
                            }
                        }
                    }
                }
            }
        };

        // State Management
        let currentPhase = 'diagnostic';
        let selectedModel = null;
        let logEntries = [];
        let nextLogId = 1;
        let problemDescribed = false;
        let decisionMode = null; // 'decision' or 'problem'

        // DOM Elements
        const focusArea = document.getElementById('focusArea');
        const panelRight = document.getElementById('rightPanel');
        const logToggle = document.getElementById('rightPanelToggle');
        const panelRightClose = document.getElementById('rightPanelClose');
        const journalEntriesContainer = document.getElementById('journalEntries');
        const journalNoteInput = document.getElementById('journalNoteInput');
        const addJournalNoteBtn = document.getElementById('addJournalNote');
        const copyJournalBtn = document.getElementById('copyJournal');
        const exportJournalBtn = document.getElementById('exportJournal');
        const confirmModal = document.getElementById('confirmModal');
        const modalCancel = document.getElementById('modalCancel');
        const modalConfirm = document.getElementById('modalConfirm');
        const sortNewestBtn = document.getElementById('sortNewest');
        const sortOldestBtn = document.getElementById('sortOldest');
        const sidebarProblem = document.getElementById('sidebarProblem');
        const sidebarProblemLabel = document.getElementById('sidebarProblemLabel');
        const sidebarProblemText = document.getElementById('sidebarProblemText');

        // State
        let logSortOrder = 'newest';
        let treeHistory = [];
        let treeCurrentNode = null;

        // ─── FOCUS AREA RENDERING ───────────────────────────────
        // The center panel shows ONLY the current step. One function per view.

        function renderFocusView() {
            focusArea.scrollTop = 0;
            window.scrollTo(0, 0);

            if (!decisionMode) {
                renderModeSelection();
            } else if (!problemDescribed) {
                renderDescribeStep();
            } else if (selectedModel) {
                renderModelWorkView();
            } else {
                renderTreeView();
            }
        }

        // Step 1: Decision vs Problem selection
        function renderModeSelection() {
            focusArea.className = 'focus-area';
            focusArea.innerHTML = `
                <div class="focus-card" style="max-width: 560px;">
                    <div class="welcome-header">
                        <div class="welcome-title">Welcome to the Mental Models Navigator</div>
                        <div class="welcome-description">This tool teaches you how to think through decisions and problems using proven mental models - structured frameworks used by the world's best thinkers. You'll be guided step by step: choose a model, explore how it works, and practice applying it to your own real situation.</div>
                    </div>
                    <div class="welcome-divider"></div>
                    <div class="focus-title">What are you working through?</div>
                    <div class="focus-subtitle">Choose your starting point</div>
                    <div class="mode-selector">
                        <div class="mode-card" data-mode="decision">
                            <div class="mode-icon">⚖️</div>
                            <div class="mode-title">I'm making a decision</div>
                            <div class="mode-desc">Choosing between options, determining a direction, weighing trade-offs</div>
                        </div>
                        <div class="mode-card" data-mode="problem">
                            <div class="mode-icon">🔍</div>
                            <div class="mode-title">I'm solving a problem</div>
                            <div class="mode-desc">Diagnosing an issue, finding a root cause, working toward a solution</div>
                        </div>
                    </div>
                </div>
            `;
            focusArea.querySelectorAll('.mode-card').forEach(card => {
                card.addEventListener('click', () => {
                    decisionMode = card.dataset.mode;
                    const modeLabel = decisionMode === 'decision' ? 'Making a Decision' : 'Solving a Problem';
                    logEntries.unshift({
                        id: nextLogId++,
                        phase: 'initial',
                        modelName: 'Mode Selected',
                        modelPrompt: 'What are you working through?',
                        response: modeLabel,
                        timestamp: new Date().toLocaleString()
                    });
                    renderJournal();
                    saveToLocalStorage();
                    renderFocusView();
                });
            });
        }

        // Step 2: Describe your decision/problem (30 words or less)
        function renderDescribeStep(prefill) {
            const modeLabel = decisionMode === 'decision' ? 'decision' : 'problem';
            focusArea.className = 'focus-area';
            focusArea.innerHTML = `
                <div class="focus-card">
                    <div class="focus-title">${decisionMode === 'decision' ? '⚖️' : '🔍'} Describe your ${modeLabel}</div>
                    <div class="focus-subtitle">Briefly describe what you're working through - 30 words or less</div>
                    <div class="focus-input-area">
                        <textarea id="describeInput" rows="3" placeholder="${decisionMode === 'decision' ? 'e.g., Should I leave my stable job to start a business, or stay and pursue an internal promotion?' : 'e.g., Our customer churn rate has doubled in the last quarter and we cannot identify the root cause'}" maxlength="300"></textarea>
                        <div class="focus-word-count" id="wordCount">0 / 30 words</div>
                    </div>
                    <button class="focus-submit-btn" id="describeSubmit" disabled>Continue</button>
                </div>
            `;
            const input = document.getElementById('describeInput');
            const wordCount = document.getElementById('wordCount');
            const submitBtn = document.getElementById('describeSubmit');

            input.addEventListener('input', () => {
                const words = input.value.trim().split(/\s+/).filter(w => w.length > 0);
                const count = words.length;
                wordCount.textContent = `${count} / 30 words`;
                wordCount.className = 'focus-word-count' + (count > 30 ? ' over-limit' : '');
                submitBtn.disabled = count === 0 || count > 30;
            });

            // Pre-fill if editing existing description
            if (prefill) {
                input.value = prefill;
                input.dispatchEvent(new Event('input'));
            }

            submitBtn.addEventListener('click', () => {
                const description = input.value.trim();
                if (!description) return;
                saveProblemDescription(description);
            });

            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !submitBtn.disabled) {
                    submitBtn.click();
                }
            });

            input.focus();
        }

        // Step 3: Tree walker (yes/no questions)
        function renderTreeView() {
            focusArea.className = 'focus-area';
            const phaseData = mentalModelsData[currentPhase];
            const tree = decisionTrees[decisionMode] && decisionTrees[decisionMode][currentPhase];

            if (!tree) {
                // No tree for this phase/mode combo - show browse view
                renderBrowseModels();
                return;
            }

            if (!treeCurrentNode) {
                treeHistory = [];
                treeCurrentNode = tree;
            }

            // If leaf node - show recommendation
            if (treeCurrentNode.model) {
                const model = phaseData.models.find(m => m.name === treeCurrentNode.model);
                const desc = model ? model.description : '';

                let historyHTML = '';
                if (treeHistory.length > 0) {
                    historyHTML = '<div class="tree-history">';
                    treeHistory.forEach(h => {
                        historyHTML += `<div class="tree-history-item">${h.question} <span class="answer">${h.answer}</span></div>`;
                    });
                    historyHTML += '</div>';
                }

                focusArea.innerHTML = `
                    <div class="focus-card" style="max-width: 600px;">
                        <div class="tree-step-label">${phaseData.title}</div>
                        <div class="tree-phase-desc">${phaseData.purpose}</div>
                        ${historyHTML}
                        <div class="tree-recommendation">
                            <div class="rec-label">Recommended Model</div>
                            <div class="rec-model-name">${treeCurrentNode.model}</div>
                            <div class="rec-model-desc">${desc}</div>
                            <div class="rec-actions">
                                <button class="tree-rec-btn primary" id="treeUseModel">Use This Model</button>
                                <button class="tree-rec-btn secondary" id="treeShowOthers">Show Me Other Options</button>
                            </div>
                            <span class="tree-restart-link" id="treeRestart">↩ Start Over</span>
                        </div>
                    </div>
                `;

                document.getElementById('treeUseModel').addEventListener('click', () => {
                    if (model) {
                        logEntries.unshift({
                            id: nextLogId++,
                            phase: currentPhase,
                            modelName: 'Model Selected',
                            modelPrompt: 'Recommended model from guided questions',
                            response: model.name,
                            timestamp: new Date().toLocaleString()
                        });
                        renderJournal();
                        saveToLocalStorage();
                        selectedModel = { ...model, phase: currentPhase };
                        renderFocusView();
                    }
                });
                document.getElementById('treeShowOthers').addEventListener('click', () => {
                    treeCurrentNode = null;
                    renderBrowseModels();
                });
                document.getElementById('treeRestart').addEventListener('click', () => {
                    treeCurrentNode = null;
                    treeHistory = [];
                    renderTreeView();
                });
                return;
            }

            // Question node
            let historyHTML = '';
            if (treeHistory.length > 0) {
                historyHTML = '<div class="tree-history">';
                treeHistory.forEach(h => {
                    historyHTML += `<div class="tree-history-item">${h.question} <span class="answer">${h.answer}</span></div>`;
                });
                historyHTML += '</div>';
            }

            const stepNum = treeHistory.length + 1;
            focusArea.innerHTML = `
                <div class="focus-card" style="max-width: 600px;">
                    <div class="tree-step-label">${phaseData.title} - Question ${stepNum}</div>
                    <div class="tree-phase-desc">${phaseData.purpose}</div>
                    ${historyHTML}
                    <div class="tree-question">${treeCurrentNode.q}</div>
                    <div class="tree-buttons">
                        <button class="tree-btn yes" id="treeYes">Yes</button>
                        <button class="tree-btn no" id="treeNo">No</button>
                    </div>
                    ${stepNum > 1 ? '<span class="tree-restart-link" id="treeRestart">↩ Start Over</span>' : ''}
                </div>
            `;

            document.getElementById('treeYes').addEventListener('click', () => {
                const phaseData = mentalModelsData[currentPhase];
                logEntries.unshift({
                    id: nextLogId++,
                    phase: currentPhase,
                    modelName: phaseData.title + ' - Guided Question',
                    modelPrompt: treeCurrentNode.q,
                    response: 'Yes',
                    timestamp: new Date().toLocaleString()
                });
                renderJournal();
                saveToLocalStorage();
                treeHistory.push({ question: treeCurrentNode.q, answer: 'Yes' });
                treeCurrentNode = treeCurrentNode.yes;
                renderTreeView();
            });
            document.getElementById('treeNo').addEventListener('click', () => {
                const phaseData = mentalModelsData[currentPhase];
                logEntries.unshift({
                    id: nextLogId++,
                    phase: currentPhase,
                    modelName: phaseData.title + ' - Guided Question',
                    modelPrompt: treeCurrentNode.q,
                    response: 'No',
                    timestamp: new Date().toLocaleString()
                });
                renderJournal();
                saveToLocalStorage();
                treeHistory.push({ question: treeCurrentNode.q, answer: 'No' });
                treeCurrentNode = treeCurrentNode.no;
                renderTreeView();
            });
            const restartBtn = document.getElementById('treeRestart');
            if (restartBtn) restartBtn.addEventListener('click', () => {
                treeCurrentNode = null;
                treeHistory = [];
                renderTreeView();
            });
        }

        // Step 4: Working with a selected model
        function renderModelWorkView() {
            focusArea.className = 'focus-area top-aligned';
            const model = selectedModel;

            const promptsHtml = model.prompts ? model.prompts.map((prompt, index) =>
                `<li data-prompt="${escapeHtml(prompt)}">${prompt}</li>`
            ).join('') : '';

            const warningsHtml = model.warnings ? model.warnings.map(w =>
                `<li>${w}</li>`
            ).join('') : '';

            const relatedHtml = model.relatedModels ? model.relatedModels.map(r =>
                `<span class="model-related-tag" data-model="${escapeHtml(r)}">${r}</span>`
            ).join('') : '';

            // Build sections array - prompts are shown inline with response area, not as accordion
            const sections = [];
            sections.push({ key: 'explanation', title: 'What It Is', body: `<div class="model-explanation">${model.explanation || ''}</div>` });
            sections.push({ key: 'example', title: 'Example', body: `<div class="model-example">${model.example || ''}</div>` });
            if (model.warnings) {
                sections.push({ key: 'warnings', title: 'Watch Out For', body: `<div class="model-warnings"><ul>${warningsHtml}</ul></div>` });
            }
            if (model.relatedModels) {
                sections.push({ key: 'related', title: 'Related Models', body: `<div class="model-related">${relatedHtml}</div>` });
            }

            const sectionsHtml = sections.map((sec, i) => {
                const isFirst = i === 0;
                const isLast = i === sections.length - 1;
                const collapsedClass = isFirst ? '' : ' collapsed';
                const nextLink = !isLast ? `<div class="section-next-link" data-next-section="${sections[i + 1].key}">Next: ${sections[i + 1].title} →</div>` : '';
                return `
                    <div class="model-section collapsible">
                        <div class="model-section-header${collapsedClass}" data-section="${sec.key}">
                            <div class="model-section-title">${sec.title}</div>
                            <span class="model-section-toggle">▼</span>
                        </div>
                        <div class="model-section-body">
                            ${sec.body}
                            ${nextLink}
                        </div>
                    </div>`;
            }).join('\n');

            focusArea.innerHTML = `
                <div class="model-work-view">
                    <span class="browse-back-link" id="backToTree">← Back to ${mentalModelsData[currentPhase].title}</span>
                    <div class="model-header">
                        <h2>${model.name}</h2>
                        <p>${model.description}</p>
                    </div>

                    ${sectionsHtml}

                    <div class="response-section" style="margin-top: 1.5rem;">
                        <div class="response-workspace-label">Questions to Answer</div>
                        <div class="response-workspace-hint">Select a question, then write your response below</div>
                        ${model.prompts ? `
                        <div class="inline-prompts" id="inlinePrompts">
                            ${model.prompts.map((prompt, i) =>
                                `<div class="inline-prompt-card${i === 0 ? ' selected' : ''}" data-prompt="${escapeHtml(prompt)}">${prompt}</div>`
                            ).join('')}
                        </div>
                        ` : ''}
                        <div class="response-active-question" id="responseActiveQuestion">
                            <div class="response-prompt-label">Your question:</div>
                            <div class="response-prompt-text" id="responsePromptText">${model.prompts ? model.prompts[0] : ''}</div>
                        </div>
                        <textarea id="responseInput" placeholder="Write your response here..." rows="5"></textarea>
                        <div class="action-buttons">
                            <button class="btn btn-primary" id="saveBtn">Add to Journal</button>
                            <button class="btn btn-secondary" id="clearBtn">Clear</button>
                        </div>
                    </div>
                </div>
            `;

            // Back button
            document.getElementById('backToTree').addEventListener('click', () => {
                selectedModel = null;
                treeCurrentNode = null;
                renderFocusView();
            });

            // Save button
            document.getElementById('saveBtn').addEventListener('click', () => {
                const responseInput = document.getElementById('responseInput');
                if (!responseInput.value.trim()) {
                    alert('Please enter your response.');
                    return;
                }
                const entry = {
                    id: nextLogId++,
                    phase: selectedModel.phase,
                    modelName: selectedModel.name,
                    modelPrompt: selectedModel.activePrompt || selectedModel.prompts[0],
                    response: responseInput.value.trim(),
                    timestamp: new Date().toLocaleString()
                };
                logEntries.unshift(entry);
                renderJournal();
                saveToLocalStorage();
                openRightPanel();

                // Clear response, stay on same model for more entries
                responseInput.value = '';
                responseInput.focus();
            });

            // Clear button
            document.getElementById('clearBtn').addEventListener('click', () => {
                document.getElementById('responseInput').value = '';
                document.getElementById('responseInput').focus();
            });

            // Prompt selection
            setupPromptSelection();
            setupCollapsibleSections();
            setupRelatedModelLinks();
        }

        // Browse all models for a phase (shown via sidebar click or "show me other options")
        function renderBrowseModels(phase) {
            const browsePhase = phase || currentPhase;
            const phaseData = mentalModelsData[browsePhase];
            focusArea.className = 'focus-area top-aligned';

            let cardsHtml = '';
            phaseData.models.forEach((model, index) => {
                cardsHtml += `
                    <div class="model-card ${browsePhase}" data-model-index="${index}">
                        <div class="model-name">${model.name}</div>
                        <div class="model-description">${model.description}</div>
                    </div>
                `;
            });

            focusArea.innerHTML = `
                <div class="browse-models-view phase-${browsePhase}">
                    <span class="browse-back-link" id="backFromBrowse">← Back to guided questions</span>
                    <h3>${phaseData.title}</h3>
                    <div class="browse-subtitle">${phaseData.purpose}</div>
                    <div class="models-grid">${cardsHtml}</div>
                </div>
            `;

            document.getElementById('backFromBrowse').addEventListener('click', () => {
                treeCurrentNode = null;
                renderFocusView();
            });

            focusArea.querySelectorAll('.model-card').forEach((card, index) => {
                card.addEventListener('click', () => {
                    const model = phaseData.models[card.dataset.modelIndex];
                    currentPhase = browsePhase;
                    updatePhaseButtons();
                    selectedModel = { ...model, phase: browsePhase };
                    renderFocusView();
                });
            });
        }

        // ─── SIDEBAR PROBLEM DISPLAY ────────────────────────────

        function updateSidebarProblem(text) {
            const label = decisionMode === 'decision' ? 'Your Decision' : 'Your Problem';
            sidebarProblemLabel.textContent = label;
            sidebarProblemText.textContent = text;
            sidebarProblem.style.display = 'block';
        }

        // ─── CORE FUNCTIONS ─────────────────────────────────────

        function saveProblemDescription(description) {
            const modeLabel = decisionMode === 'decision' ? 'Decision' : 'Problem';

            // Update existing entry if editing, otherwise create new
            const existingEntry = logEntries.find(e => e.phase === 'initial');
            if (existingEntry) {
                existingEntry.response = description;
                existingEntry.timestamp = new Date().toLocaleString() + ' (edited)';
            } else {
                const entry = {
                    id: nextLogId++,
                    phase: 'initial',
                    modelName: `${modeLabel} Description`,
                    modelPrompt: decisionMode === 'decision'
                        ? 'What decision are you facing?'
                        : 'What problem are you trying to solve?',
                    response: description,
                    timestamp: new Date().toLocaleString()
                };
                logEntries.unshift(entry);
            }
            problemDescribed = true;

            updateSidebarProblem(description);
            renderJournal();
            saveToLocalStorage();
            openRightPanel();

            // Show tree view
            treeCurrentNode = null;
            renderFocusView();
            updatePhaseButtons();
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function setupPromptSelection() {
            const promptCards = focusArea.querySelectorAll('.inline-prompt-card');
            const promptDisplay = document.getElementById('responsePromptText');

            function setActivePrompt(promptText) {
                if (selectedModel) selectedModel.activePrompt = promptText;
                if (promptDisplay) promptDisplay.textContent = promptText;
            }

            promptCards.forEach(card => {
                card.addEventListener('click', function() {
                    promptCards.forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    setActivePrompt(this.getAttribute('data-prompt'));
                    const responseInput = document.getElementById('responseInput');
                    if (responseInput) responseInput.focus();
                });
            });

            // Pre-select first prompt
            if (promptCards.length > 0 && selectedModel) {
                selectedModel.activePrompt = promptCards[0].getAttribute('data-prompt');
            }
        }

        function setupCollapsibleSections() {
            focusArea.querySelectorAll('.model-section-header').forEach(header => {
                header.addEventListener('click', function() {
                    this.classList.toggle('collapsed');
                });
            });

            // "Next" links: close current section, open next
            focusArea.querySelectorAll('.section-next-link').forEach(link => {
                link.addEventListener('click', function() {
                    const nextKey = this.getAttribute('data-next-section');
                    // Collapse current section
                    const currentHeader = this.closest('.model-section').querySelector('.model-section-header');
                    if (currentHeader) currentHeader.classList.add('collapsed');
                    // Open next section
                    const nextHeader = focusArea.querySelector(`.model-section-header[data-section="${nextKey}"]`);
                    if (nextHeader) {
                        nextHeader.classList.remove('collapsed');
                        nextHeader.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
        }

        function setupRelatedModelLinks() {
            focusArea.querySelectorAll('.model-related-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    const modelName = this.getAttribute('data-model');
                    navigateToModel(modelName);
                });
            });
        }

        function navigateToModel(modelName) {
            for (const [phaseKey, phaseData] of Object.entries(mentalModelsData)) {
                const model = phaseData.models.find(m => m.name === modelName);
                if (model) {
                    currentPhase = phaseKey;
                    updatePhaseButtons();
                    selectedModel = { ...model, phase: phaseKey };
                    renderFocusView();
                    return;
                }
            }
        }

        function updatePhaseButtons() {
            document.querySelectorAll('.phase-sidebar-item').forEach(item => {
                item.classList.toggle('active', item.dataset.phase === currentPhase);
            });
        }

        // Update sidebar phase progress indicators
        function updatePhaseProgress() {
            const phases = ['diagnostic', 'evaluative', 'protective', 'generative', 'implementation'];
            phases.forEach(phase => {
                const phaseEntries = logEntries.filter(e => e.phase === phase);
                const count = phaseEntries.length;
                const capitalPhase = phase.charAt(0).toUpperCase() + phase.slice(1);

                // Update progress text
                const textEl = document.getElementById('progressText' + capitalPhase);
                if (textEl) textEl.textContent = count === 1 ? '1 entry' : `${count} entries`;

                // Update status badge
                const statusEl = document.getElementById('status' + capitalPhase);
                if (statusEl) {
                    statusEl.className = 'status-badge ' + (count === 0 ? 'not-started' : 'in-progress');
                    statusEl.textContent = count === 0 ? 'Not Started' : 'In Progress';
                }

                // Update progress bar (approximate: 3+ entries = 100%)
                const fillEl = document.getElementById('progress' + capitalPhase);
                if (fillEl) {
                    const pct = Math.min(100, Math.round((count / 3) * 100));
                    fillEl.style.width = pct + '%';
                }
            });
        }

        // Render Journal Entries
        function renderJournal() {
            // Update sidebar phase progress
            updatePhaseProgress();

            if (logEntries.length === 0) {
                journalEntriesContainer.innerHTML = '<div class="empty-state">Your decision journal will appear here as you work through the process.</div>';
                return;
            }

            // Sort entries based on current sort order
            const sortedEntries = [...logEntries].sort((a, b) => {
                if (logSortOrder === 'oldest') {
                    return a.id - b.id;
                }
                return b.id - a.id; // newest first (default)
            });

            journalEntriesContainer.innerHTML = '';
            sortedEntries.forEach(entry => {
                const logEntry = document.createElement('div');
                logEntry.className = `log-entry ${entry.phase}`;
                logEntry.dataset.entryId = entry.id;

                // Show prompt if available (not for notes)
                const promptHtml = entry.modelPrompt ?
                    `<div class="log-prompt">"${entry.modelPrompt}"</div>` : '';

                logEntry.innerHTML = `
                    <div class="log-entry-header">
                        <div class="log-model-name">${entry.modelName}</div>
                        <div class="log-actions">
                            <button class="log-action-btn" onclick="editEntry(${entry.id})" title="Edit">✏️</button>
                            <button class="log-action-btn" onclick="deleteEntry(${entry.id})" title="Delete">🗑️</button>
                        </div>
                    </div>
                    ${promptHtml}
                    <div class="log-content">${entry.response}</div>
                    <div class="log-timestamp">${entry.timestamp}</div>
                `;

                journalEntriesContainer.appendChild(logEntry);
            });
        }

        // Start Over - Show confirmation modal
        function startOver() {
            showConfirmModal();
        }

        // Download Session as Text File
        function downloadSession() {
            let content = 'MENTAL MODELS DECISION-MAKING SESSION\n';
            content += '='.repeat(60) + '\n';
            content += `Date: ${new Date().toLocaleString()}\n\n`;

            // Export ALL initial entries (mode selection, problem description, etc.)
            const initialEntries = logEntries.filter(e => e.phase === 'initial');
            if (initialEntries.length > 0) {
                content += 'GETTING STARTED\n';
                content += '-'.repeat(60) + '\n\n';
                // Show in chronological order (oldest first)
                [...initialEntries].reverse().forEach(entry => {
                    if (entry.modelPrompt) {
                        content += `Q: ${entry.modelPrompt}\n`;
                    }
                    content += `${entry.modelName}: ${entry.response}\n`;
                    content += `(${entry.timestamp})\n\n`;
                });
                content += '\n';
            }

            // Add all entries grouped by phase
            const phases = ['diagnostic', 'evaluative', 'protective', 'generative', 'implementation'];
            const phaseNames = {
                diagnostic: 'DIAGNOSTIC PHASE',
                evaluative: 'EVALUATIVE PHASE',
                protective: 'PROTECTIVE PHASE',
                generative: 'GENERATIVE PHASE',
                implementation: 'IMPLEMENTATION PHASE'
            };

            phases.forEach(phase => {
                const phaseEntries = logEntries.filter(e => e.phase === phase);
                if (phaseEntries.length > 0) {
                    content += phaseNames[phase] + '\n';
                    content += '-'.repeat(60) + '\n\n';

                    // Show in chronological order (oldest first)
                    [...phaseEntries].reverse().forEach(entry => {
                        content += `${entry.modelName}:\n`;
                        if (entry.modelPrompt) {
                            content += `Q: ${entry.modelPrompt}\n`;
                        }
                        content += `A: ${entry.response}\n`;
                        content += `(${entry.timestamp})\n\n`;
                    });

                    content += '\n';
                }
            });

            // Add notes if any
            const noteEntries = logEntries.filter(e => e.phase === 'note');
            if (noteEntries.length > 0) {
                content += 'NOTES\n';
                content += '-'.repeat(60) + '\n\n';
                [...noteEntries].reverse().forEach(entry => {
                    content += `${entry.response}\n`;
                    content += `(${entry.timestamp})\n\n`;
                });
            }
            
            // Create and download file
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `decision-session-${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Reset App to Initial State
        function resetApp() {
            logEntries = [];
            nextLogId = 1;
            problemDescribed = false;
            decisionMode = null;
            selectedModel = null;
            currentPhase = 'diagnostic';
            treeHistory = [];
            treeCurrentNode = null;

            localStorage.removeItem('mentalModelsLog');

            journalNoteInput.value = '';
            sidebarProblem.style.display = 'none';
            sidebarProblemText.textContent = '';

            // Close right panel
            closeRightPanel();

            renderJournal();
            updatePhaseButtons();
            renderFocusView();
        }

        // Edit Entry
        window.editEntry = function(id) {
            const entry = logEntries.find(e => e.id === id);
            if (!entry) return;

            const newResponse = prompt('Edit your response:', entry.response);
            if (newResponse !== null && newResponse.trim()) {
                entry.response = newResponse.trim();
                entry.timestamp = new Date().toLocaleString() + ' (edited)';
                renderJournal();
                saveToLocalStorage();
            }
        };

        // Delete Entry
        window.deleteEntry = function(id) {
            if (confirm('Delete this entry?')) {
                logEntries = logEntries.filter(e => e.id !== id);
                renderJournal();
                saveToLocalStorage();
            }
        };

        // Local Storage
        function saveToLocalStorage() {
            localStorage.setItem('mentalModelsLog', JSON.stringify({
                entries: logEntries,
                nextId: nextLogId,
                decisionMode: decisionMode,
                currentPhase: currentPhase,
                selectedModelName: selectedModel ? selectedModel.name : null,
                selectedModelPhase: selectedModel ? selectedModel.phase : null
            }));
        }

        // Returns true if a saved session was found, false otherwise
        function loadFromLocalStorage() {
            const saved = localStorage.getItem('mentalModelsLog');
            if (!saved) return false;

            const data = JSON.parse(saved);
            const savedEntries = data.entries || [];
            const hasProblem = savedEntries.some(e => e.phase === 'initial');

            // Only count as a real session if there's meaningful progress
            if (!data.decisionMode && savedEntries.length === 0) return false;

            // Store parsed data for restore
            window._pendingRestore = data;
            return true;
        }

        function restoreSession() {
            const data = window._pendingRestore;
            if (!data) return;
            delete window._pendingRestore;

            logEntries = data.entries || [];
            nextLogId = data.nextId || 1;
            decisionMode = data.decisionMode || null;
            currentPhase = data.currentPhase || 'diagnostic';

            // Restore problem state
            const problemEntry = logEntries.find(e => e.phase === 'initial');
            if (problemEntry) {
                problemDescribed = true;
                updateSidebarProblem(problemEntry.response);
            }

            // Restore selected model if saved
            if (data.selectedModelName && data.selectedModelPhase) {
                const phaseData = mentalModelsData[data.selectedModelPhase];
                if (phaseData) {
                    const model = phaseData.models.find(m => m.name === data.selectedModelName);
                    if (model) {
                        selectedModel = { ...model, phase: data.selectedModelPhase };
                    }
                }
            }

            updatePhaseButtons();
            renderJournal();
            renderFocusView();
        }

        function renderRestorePrompt() {
            const data = window._pendingRestore;
            if (!data) { renderFocusView(); return; }

            const entries = data.entries || [];
            const problemEntry = entries.find(e => e.phase === 'initial');
            const problemText = problemEntry ? problemEntry.response : null;
            const mode = data.decisionMode;
            const phase = data.currentPhase || 'diagnostic';
            const entryCount = entries.filter(e => e.phase !== 'initial').length;
            const phaseLabel = phase.charAt(0).toUpperCase() + phase.slice(1);

            let summaryHTML = '';
            if (mode) {
                summaryHTML += `<div class="restore-detail"><strong>Mode:</strong> ${mode === 'decision' ? 'Decision' : 'Problem'}</div>`;
            }
            if (problemText) {
                summaryHTML += `<div class="restore-detail"><strong>${mode === 'decision' ? 'Decision' : 'Problem'}:</strong> ${escapeHtml(problemText)}</div>`;
            }
            if (entryCount > 0) {
                summaryHTML += `<div class="restore-detail"><strong>Journal entries:</strong> ${entryCount}</div>`;
            }
            summaryHTML += `<div class="restore-detail"><strong>Last phase:</strong> ${phaseLabel}</div>`;

            focusArea.className = 'focus-area';
            focusArea.innerHTML = `
                <div class="focus-card" style="max-width: 520px;">
                    <div class="focus-title">Welcome Back</div>
                    <div class="focus-subtitle">You have a previous session in progress</div>
                    <div class="restore-summary">
                        ${summaryHTML}
                    </div>
                    <div class="restore-actions">
                        <button class="restore-btn primary" id="restoreContinue">Continue Where I Left Off</button>
                        <button class="restore-btn secondary" id="restoreStartFresh">Start From Scratch</button>
                    </div>
                    <div class="restore-export-row" id="restoreExportRow" style="display: none;">
                        <span class="restore-export-text">Would you like to export your previous work first?</span>
                        <div class="restore-export-actions">
                            <button class="restore-export-btn" id="restoreExportYes">Export &amp; Reset</button>
                            <button class="restore-export-btn muted" id="restoreExportNo">Just Reset</button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('restoreContinue').addEventListener('click', () => {
                restoreSession();
            });

            document.getElementById('restoreStartFresh').addEventListener('click', () => {
                // Hide the two main buttons, show export choice
                document.getElementById('restoreContinue').style.display = 'none';
                document.getElementById('restoreStartFresh').style.display = 'none';
                document.getElementById('restoreExportRow').style.display = 'block';
            });

            document.getElementById('restoreExportYes').addEventListener('click', () => {
                // Temporarily load the old entries to export them
                const oldEntries = logEntries;
                logEntries = data.entries || [];
                downloadSession();
                logEntries = oldEntries;
                // Now clear and start fresh
                delete window._pendingRestore;
                resetApp();
            });

            document.getElementById('restoreExportNo').addEventListener('click', () => {
                delete window._pendingRestore;
                resetApp();
            });
        }

        // ─── CONFIRM MODAL ──────────────────────────────────────
        function showConfirmModal() {
            confirmModal.classList.add('visible');
        }
        function closeConfirmModal() {
            confirmModal.classList.remove('visible');
        }

        // ─── RIGHT PANEL ────────────────────────────────────────
        const drawerBackdrop = document.getElementById('drawerBackdrop');

        function openRightPanel() {
            panelRight.classList.add('open');
            logToggle.classList.add('active');
            drawerBackdrop.classList.add('visible');
        }
        function closeRightPanel() {
            panelRight.classList.remove('open');
            logToggle.classList.remove('active');
            drawerBackdrop.classList.remove('visible');
        }

        // Swipe-to-close on the journal panel (swipe right closes)
        (function initSwipeToClose() {
            let touchStartX = 0;
            let touchStartY = 0;
            let isSwiping = false;

            panelRight.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                isSwiping = true;
            }, { passive: true });

            panelRight.addEventListener('touchmove', (e) => {
                if (!isSwiping) return;
                const deltaX = e.touches[0].clientX - touchStartX;
                const deltaY = Math.abs(e.touches[0].clientY - touchStartY);
                // If vertical scroll is dominant, cancel swipe detection
                if (deltaY > Math.abs(deltaX)) {
                    isSwiping = false;
                }
            }, { passive: true });

            panelRight.addEventListener('touchend', (e) => {
                if (!isSwiping) return;
                const deltaX = e.changedTouches[0].clientX - touchStartX;
                // Swipe right by at least 80px to close
                if (deltaX > 80) {
                    closeRightPanel();
                }
                isSwiping = false;
            }, { passive: true });
        })();

        // ─── SIDEBAR (MOBILE) ──────────────────────────────────
        const sidebarEl = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebarBackdrop = document.getElementById('sidebarBackdrop');

        function openSidebar() {
            sidebarEl.classList.add('open');
            sidebarBackdrop.classList.add('visible');
            sidebarToggle.classList.add('hidden');
        }
        function closeSidebar() {
            sidebarEl.classList.remove('open');
            sidebarBackdrop.classList.remove('visible');
            sidebarToggle.classList.remove('hidden');
        }

        sidebarToggle.addEventListener('click', openSidebar);
        sidebarBackdrop.addEventListener('click', closeSidebar);

        // Swipe left to close sidebar
        (function initSidebarSwipe() {
            let touchStartX = 0;
            let touchStartY = 0;
            let isSwiping = false;

            sidebarEl.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                isSwiping = true;
            }, { passive: true });

            sidebarEl.addEventListener('touchmove', (e) => {
                if (!isSwiping) return;
                const deltaX = e.touches[0].clientX - touchStartX;
                const deltaY = Math.abs(e.touches[0].clientY - touchStartY);
                if (deltaY > Math.abs(deltaX)) {
                    isSwiping = false;
                }
            }, { passive: true });

            sidebarEl.addEventListener('touchend', (e) => {
                if (!isSwiping) return;
                const deltaX = e.changedTouches[0].clientX - touchStartX;
                // Swipe left by at least 80px to close
                if (deltaX < -80) {
                    closeSidebar();
                }
                isSwiping = false;
            }, { passive: true });
        })();

        // ─── EVENT SETUP ────────────────────────────────────────
        function setupApp() {
            // Right panel toggle
            logToggle.addEventListener('click', () => {
                if (panelRight.classList.contains('open')) {
                    closeRightPanel();
                } else {
                    openRightPanel();
                }
            });
            panelRightClose.addEventListener('click', closeRightPanel);
            drawerBackdrop.addEventListener('click', closeRightPanel);

            // Journal note
            addJournalNoteBtn.addEventListener('click', () => {
                const note = journalNoteInput.value.trim();
                if (!note) return;
                logEntries.push({
                    id: nextLogId++,
                    modelName: 'Journal Note',
                    phase: 'note',
                    response: note,
                    timestamp: new Date().toLocaleString()
                });
                journalNoteInput.value = '';
                renderJournal();
                saveToLocalStorage();
            });

            // Copy journal
            copyJournalBtn.addEventListener('click', () => {
                if (logEntries.length === 0) return;
                const text = logEntries.map(e =>
                    `[${e.phase}] ${e.modelName}: ${e.response} (${e.timestamp})`
                ).join('\n\n');
                navigator.clipboard.writeText(text);
                copyJournalBtn.textContent = 'Copied!';
                setTimeout(() => copyJournalBtn.textContent = 'Copy All', 2000);
            });

            // Export journal
            exportJournalBtn.addEventListener('click', downloadSession);

            // Sort buttons
            sortNewestBtn.addEventListener('click', () => {
                logSortOrder = 'newest';
                sortNewestBtn.classList.add('active');
                sortOldestBtn.classList.remove('active');
                renderJournal();
            });
            sortOldestBtn.addEventListener('click', () => {
                logSortOrder = 'oldest';
                sortOldestBtn.classList.add('active');
                sortNewestBtn.classList.remove('active');
                renderJournal();
            });

            // Confirm modal
            modalCancel.addEventListener('click', closeConfirmModal);
            modalConfirm.addEventListener('click', () => {
                closeConfirmModal();
                resetApp();
            });

            // Sidebar phase clicks → browse models for that phase
            document.querySelectorAll('.phase-sidebar-item').forEach(item => {
                item.addEventListener('click', () => {
                    if (!problemDescribed) return;
                    currentPhase = item.dataset.phase;
                    updatePhaseButtons();
                    renderBrowseModels(currentPhase);
                });
            });

            // Sidebar actions
            const quickSuggest = document.getElementById('quickSuggest');
            if (quickSuggest) {
                quickSuggest.addEventListener('click', () => {
                    if (!problemDescribed) return;
                    // Clear current model selection and start fresh tree
                    selectedModel = null;
                    treeCurrentNode = null;
                    treeHistory = [];
                    renderTreeView();
                });
            }

            const quickBrowse = document.getElementById('quickBrowse');
            if (quickBrowse) {
                quickBrowse.addEventListener('click', () => {
                    if (!problemDescribed) return;
                    renderBrowseModels(currentPhase);
                });
            }

            const quickExport = document.getElementById('quickExport');
            if (quickExport) {
                quickExport.addEventListener('click', downloadSession);
            }

            const startOverBtn = document.getElementById('startOverSidebar');
            if (startOverBtn) {
                startOverBtn.addEventListener('click', startOver);
            }

            // Edit problem from sidebar
            const editProblem = document.getElementById('editProblem');
            if (editProblem) {
                editProblem.addEventListener('click', () => {
                    // Go back to describe step with existing text pre-filled
                    const existingText = sidebarProblemText.textContent || '';
                    problemDescribed = false;
                    sidebarProblem.style.display = 'none';
                    renderDescribeStep(existingText);
                });
            }
        }

        // ─── ORIENTATION CHANGE FIX ─────────────────────────────
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                window.scrollTo(0, 0);
                document.documentElement.style.width = '100%';
                document.body.style.width = '100%';
            }, 100);
        });

        // ─── INITIALIZE ─────────────────────────────────────────
        setupApp();
        const hasSavedSession = loadFromLocalStorage();
        if (hasSavedSession) {
            renderRestorePrompt();
        } else {
            renderFocusView();
        }
        renderJournal();
    </script>
</body>
</html>
